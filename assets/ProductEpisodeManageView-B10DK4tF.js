const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TipTop-CsCSJ8vj.js","assets/index-tnypl4_E.js","assets/index-9RBC8si_.css","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/TipTop-CCLCb3RD.css"])))=>i.map(i=>d[i]);
import{u as E,r as k,x as h,o as B,B as D,h as p,b as c,m as u,w as M,k as d,d as s,e as v,v as m,q as a,c as g,E as N,t as z,z as R,D as j,A as b,f as I,_ as q,g as n}from"./index-tnypl4_E.js";import{_ as H}from"./TitleBar-6bRN8L6G.js";import{u as L}from"./sidebar-8eGwrN5D.js";import{_ as w,b as O}from"./MetaTags-B_jENEc4.js";import{_ as F}from"./UploadFiles-CtL-6HbU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PencilIcon-DHhh0k_r.js";const G={class:"mr-auto flex gap-4 items-center"},J={role:"tablist",class:"tabs tabs-box bg-base-100/20 mr-auto border-base-100 border"},K=["src"],Q={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},W={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y={class:"fieldset"},Z={class:"border border-primary p-4 rounded-xl bg-base-100"},ee={class:"flex gap-4 justify-start mt-4"},te={key:0,class:"mt-6"},se={class:"fieldset"},le={class:"border border-primary p-4 rounded-xl bg-base-100"},ie={class:"flex gap-4 justify-start mt-4"},oe={key:0,class:"p-2 rounded-xl mt-4 bg-green-500/10 text-green-700",dir:"auto"},ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},de={class:"fieldset"},ne={class:"fieldset"},ue={class:"grid grid-cols-1 md:grid-cols-3"},re={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},pe={class:"label"},ve=["checked"],me={class:"text-center"},be={key:1,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},fe={key:2,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},$e={__name:"ProductEpisodeManageView",setup(_e){const V=N(()=>q(()=>import("./TipTop-CsCSJ8vj.js"),__vite__mapDeps([0,1,2,3,4]))),f=L(),$=E(),o=h(),C=I(),t=k({}),_=k({title:""}),T=async()=>{const i=await b.post("admin/product/info",{id:o.params.product_id});i.ok&&(_.value=i.product,o.name!="admin_product_episode_new"&&y())},y=async()=>{const i=await b.post("admin/product/episode-info",{episode_id:o.params.episode_id});i.ok&&(t.value=i.episode)},r=async()=>{const i=await b.post("admin/product/episode-save",{...t.value,product_id:o.params.product_id});i.ok&&($.showToast("عملیات با موفقیت انجام شد!","success"),o.name=="admin_product_episode_new"&&(await C.push({name:"admin_product_episode_edit",params:{product_id:o.params.product_id,episode_id:i.episode_id}}),y()))};o.name=="admin_product_episode_new"?f.setTitle("ایجاد قسمت جدید"):f.setTitle("ویرایش قسمت");const S=i=>{t.value.video_target=i.name,r()},P=i=>{t.value.video_preview_target=i.name,r()},U=i=>{t.value.video_poster=i.name,r()},A=i=>{t.value.audio=i.name,r()};B(()=>{T()});const x=D(()=>`\`\`\` 
<h1>${t.value.title}</h1> <br> ${t.value.description} 
 \`\`\` 
---
  
`);return(i,e)=>(n(),p("div",null,[c(H,{title:d(f).getTitle+" - ("+_.value.title+")"},{default:M(()=>[s("div",G,[s("div",J,[s("a",{href:"#",role:"tab",class:a(["tab",{"tab-active tab-primary":d(o).hash==""}])}," اطلاعات کلی ",2),s("a",{href:"#meta",class:a([{"tab-active":d(o).hash=="#meta"},"tab"]),role:"tab"}," متا تگ‌ها ",2),s("a",{href:"#files",class:a([{"tab-active":d(o).hash=="#files"},"tab"]),role:"tab"}," فایل ها ",2)]),s("img",{src:d(b).server+_.value.image,class:"size-10 rounded-xl",alt:""},null,8,K)])]),_:1},8,["title"]),d(o).hash==""?(n(),p("div",Q,[s("div",W,[s("div",X,[s("fieldset",Y,[e[22]||(e[22]=s("legend",{class:"fieldset-legend"},"عنوان قسمت دوره",-1)),v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.title=l),class:"input input-primary w-full",type:"text",placeholder:"عنوان محصول"},null,512),[[m,t.value.title]])]),c(w,{title:"لینک قسمت","site-domain":"/","ai-use-type":"link_generator","ai-input":t.value.title,modelValue:t.value.link,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.link=l)},null,8,["ai-input","modelValue"])]),s("div",{class:a({"opacity-70":t.value.display_status==="introduction"})},[c(w,{maxlength:140,title:"توضیح کوتاه","ai-use-type":"small_description","ai-input":x.value,modelValue:t.value.small_description,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.small_description=l)},null,8,["ai-input","modelValue"])],2),s("div",{class:a({"opacity-70":t.value.display_status==="introduction"})},[e[23]||(e[23]=s("legend",{class:"fieldset-legend"},"توضیحات",-1)),(n(),g(d(V),{key:t.value.id,default:t.value.description,modelValue:t.value.description,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.description=l)},null,8,["default","modelValue"]))],2),s("div",Z,[e[25]||(e[25]=s("div",null," نوع ارائه این قسمت : ",-1)),s("div",ee,[s("button",{class:a([`${t.value.display_status==="introduction"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[4]||(e[4]=l=>t.value.display_status="introduction")}," معرفی دوره ",2),s("button",{class:a([`${t.value.display_status==="free"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[5]||(e[5]=l=>t.value.display_status="free")},"رایگان",2),s("button",{class:a([`${t.value.display_status==="free_with_login"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[6]||(e[6]=l=>t.value.display_status="free_with_login")}," رایگان با لاگین ",2),s("button",{class:a([`${t.value.display_status==="vip_preview"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[7]||(e[7]=l=>t.value.display_status="vip_preview")}," خرید+پیش‌نمایش ",2),s("button",{class:a([`${t.value.display_status==="vip"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[8]||(e[8]=l=>t.value.display_status="vip")}," خرید ",2)]),t.value.display_status=="vip_preview"?(n(),p("div",te,[s("fieldset",se,[e[24]||(e[24]=s("legend",{class:"fieldset-legend"},"مدت زمان پیش نمایش رایگان (به ثانیه)",-1)),v(s("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.free_demo_time=l),class:"input input-primary w-full",type:"number",placeholder:""},null,512),[[m,t.value.free_demo_time]])])])):u("",!0)]),s("div",le,[e[26]||(e[26]=s("div",null," نوع ویدیو : ",-1)),s("div",ie,[s("button",{class:a([`${t.value.video_type==="dash"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[10]||(e[10]=l=>t.value.video_type="dash")},"DASH",2),s("button",{class:a([`${t.value.video_type==="mp4"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[11]||(e[11]=l=>t.value.video_type="mp4")},"mp4",2)]),t.value.video_target?(n(),p("div",oe,z(t.value.video_target),1)):u("",!0)]),s("div",ae,[s("div",null,[s("fieldset",de,[e[27]||(e[27]=s("legend",{class:"fieldset-legend"},"مدت زمان ویدیو به ثانیه",-1)),v(s("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.duration=l),class:"input input-primary w-full",type:"number",placeholder:""},null,512),[[m,t.value.duration]])])]),s("div",null,[s("fieldset",ne,[e[28]||(e[28]=s("legend",{class:"fieldset-legend"},"جایگاه (برای مرتب سازی) (به صورت عدد 0 تا 100)",-1)),v(s("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.sort_index=l),class:"input input-primary w-full",type:"text",placeholder:""},null,512),[[m,t.value.sort_index]])])])]),s("div",ue,[s("fieldset",re,[s("label",pe,[v(s("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=l=>t.value.publish=l),checked:t.value.publish,class:"checkbox checkbox-success"},null,8,ve),[[j,t.value.publish]]),e[29]||(e[29]=R(" انتشار "))])])]),s("div",me,[s("button",{onClick:e[15]||(e[15]=l=>r()),class:"btn btn-success"}," ذخیره قسمت ")])])])):u("",!0),d(o).hash=="#meta"?(n(),p("div",be,[t.value.id?(n(),g(O,{key:0,modelValue:t.value,"onUpdate:modelValue":e[16]||(e[16]=l=>t.value=l),"ai-input":x.value,onSave:e[17]||(e[17]=l=>r())},null,8,["modelValue","ai-input"])):u("",!0)])):u("",!0),d(o).hash=="#files"?(n(),p("div",fe,[t.value.id?(n(),g(F,{key:0,"fetch-files-url":"admin/product/get-episode-files",onSetVideoPoster:e[18]||(e[18]=l=>U(l)),onSetVideo:e[19]||(e[19]=l=>S(l)),onSetVideoPreview:e[20]||(e[20]=l=>P(l)),onSetAudio:e[21]||(e[21]=l=>A(l)),"rename-file-url":"admin/product/rename-episode-file","upload-link":"admin/product/upload-episode-video",episode:t.value},null,8,["episode"])):u("",!0)])):u("",!0)]))}};export{$e as default};
