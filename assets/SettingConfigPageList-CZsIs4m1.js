import{r as l,o as x,h as a,d as t,m as c,k as g,L as f,F as k,l as y,t as v,A as _,g as i}from"./index-CgnrPS0N.js";const C={class:"p-6 mx-auto bg-base-200"},w={class:"flex items-center justify-between mb-6"},B={class:"overflow-x-auto rounded-lg shadow"},L={class:"table w-full"},M={class:""},P={class:"flex gap-2"},$=["onClick"],A=["onClick"],F={key:0},N={key:0,class:"text-center py-6"},j={__name:"SettingConfigPageList",setup(S){const o=l([]),r=l(!1),d=l(""),u=l("");l(null),l(null);const b=()=>{r.value=!0,d.value="",u.value="",_.post("/admin/config/list",{filter_type:"page"}).then(s=>{o.value=s.list||[]}).catch(s=>{console.error(s),u.value="❌ خطا در دریافت لیست نویسندگان"}).finally(()=>{r.value=!1})},m=s=>{confirm("آیا از حذف این نویسنده مطمئن هستید؟")&&_.post("admin/config/remove",{id:s}).then(e=>{e.ok&&(d.value="✅ نویسنده با موفقیت حذف شد.",o.value=o.value.filter(n=>n.id!==s))}).catch(e=>{console.error(e),u.value="❌ خطا در حذف نویسنده"})};return x(()=>{b()}),(s,e)=>(i(),a("div",C,[t("div",w,[e[1]||(e[1]=t("h1",{class:"text-2xl font-bold"},"لیست صفحه های جانبی",-1)),t("button",{class:"btn btn-outline btn-primary",onClick:e[0]||(e[0]=n=>g(f).push({name:"admin_setting_pages_new"}))}," ایجاد ")]),t("div",B,[t("table",L,[e[3]||(e[3]=t("thead",null,[t("tr",{class:"bg-base-300"},[t("th",null,"#"),t("th",{class:"w-full"},"عنوان"),t("th",null,"عملیات")])],-1)),t("tbody",null,[(i(!0),a(k,null,y(o.value,(n,p)=>(i(),a("tr",{key:n.id,class:"hover"},[t("td",null,v(p+1),1),t("td",M,v(n.name||"-"),1),t("td",null,[t("div",P,[t("button",{class:"btn btn-xs btn-outline btn-info",onClick:h=>g(f).push({name:"admin_setting_pages_edit",params:{id:n.id}})},"ویرایش",8,$),t("button",{class:"btn btn-xs btn-outline btn-error",onClick:h=>m(n.id)},"حذف",8,A)])])]))),128)),o.value.length===0&&!r.value?(i(),a("tr",F,e[2]||(e[2]=[t("td",{colspan:"7",class:"text-center py-6 text-gray-500"}," هیچ نویسنده‌ای یافت نشد 🙁 ",-1)]))):c("",!0)])])]),r.value?(i(),a("div",N,e[4]||(e[4]=[t("span",{class:"loading loading-spinner loading-lg"},null,-1)]))):c("",!0)]))}};export{j as default};
