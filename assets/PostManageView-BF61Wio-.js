import{u as $,r as v,x as B,D as S,h as p,b as a,m as V,w as g,k as d,d as t,e as r,v as _,c as D,A as m,z as b,C as N,B as P,f as z,j as A,g as u,q as C}from"./index-qHGizP-0.js";import{_ as I}from"./TextEditor-BXTr2dYt.js";import{_ as L}from"./TitleBar-Dyl1Jvff.js";import{u as j}from"./sidebar-DGkU3f_H.js";import{_ as x,r as E,a as w}from"./AiInput-BRsXRjxE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={role:"tablist",class:"tabs tabs-box"},F={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},G={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},K={class:"fieldset"},O={class:""},H={class:"rounded-lg bg-base-200 p-2 lg:p-4 flex flex-col gap-4 lg:min-w-sm"},J={class:"text-center"},Q={class:"mt-4"},W=["src"],X={key:1,class:"mx-auto"},Y={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},Z={class:"label"},ee=["checked"],te={class:"flex flex-wrap gap-2 md:grid-cols-2"},le={key:1,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},se={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},oe={class:"fieldset"},ae={class:"fieldset"},ie={class:"fieldset"},fe={__name:"PostManageView",setup(ne){const c=j(),T=$(),n=B(),U=z(),k=async()=>{const i=await m.post("admin/post/info",{id:n.params.id});i.ok&&(l.value=i.post)},y=v(null),l=v({contents:[],meta:{}}),h=async()=>{const i=await m.post("admin/post/save",{...l.value});i.ok&&(T.showToast("مطلب ذخیره شد!","success"),n.name=="admin_post_new"&&(await U.push({name:"admin_post_edit",params:{id:i.post.id}}),k()))},M=i=>{const e=i.target.files[0];m.uploadFile("admin/post/upload-image",e,{},o=>{console.log(o)},o=>{console.log(o),o.ok&&(console.log(o.dir),l.value.image=o.dir)},o=>{})};n.name=="admin_post_new"?c.setTitle("ایجاد مطلب جدید"):(c.setTitle("ویرایش مطلب"),k());const R=v("https://nitrocode.ir"),f=S(()=>`<h1>${l.value.title}</h1><br>`+l.value.description);return(i,e)=>{const o=A("RouterLink");return u(),p("div",null,[a(L,{title:d(c).getTitle},{default:g(()=>[t("div",q,[a(o,{to:{hash:""},role:"tab",class:C(["tab",{"tab-active tab-primary":d(n).hash==""}])},{default:g(()=>e[10]||(e[10]=[b(" اطلاعات مطلب ")])),_:1,__:[10]},8,["class"]),a(o,{to:{hash:"#meta"},role:"tab",class:C(["tab",{"tab-active tab-primary":d(n).hash=="#meta"}])},{default:g(()=>e[11]||(e[11]=[b(" متا تگ‌ها ")])),_:1,__:[11]},8,["class"])])]),_:1},8,["title"]),d(n).hash==""?(u(),p("div",F,[t("div",G,[t("fieldset",K,[e[12]||(e[12]=t("legend",{class:"fieldset-legend"},"عنوان",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.title=s),class:"input input-primary w-full",type:"text",placeholder:"عنوان "},null,512),[[_,l.value.title]])]),a(x,{title:"لینک مطلب","site-domain":`${R.value}/post/`,"ai-use-type":"link_generator","ai-input":l.value.title,modelValue:l.value.link,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.link=s)},null,8,["site-domain","ai-input","modelValue"]),a(x,{title:"توضیح کوتاه","ai-use-type":"small_description","site-domain":"","ai-input":f.value},null,8,["ai-input"]),t("div",O,[e[13]||(e[13]=t("legend",{class:"fieldset-legend"},"متن مطلب",-1)),(u(),D(I,{key:l.value.id,value:l.value.description,onInput:e[2]||(e[2]=s=>l.value.description=s)},null,8,["value"]))])]),t("div",H,[t("div",J,[t("input",{onChange:M,ref_key:"upload_main_image",ref:y,accept:".png, .jpg, .webp",type:"file",class:"hidden"},null,544),t("div",Q,[l.value.image?(u(),p("img",{key:0,class:"max-w-72 w-full h-full mx-auto rounded-lg",src:d(m).server+l.value.image,alt:""},null,8,W)):(u(),p("div",X,[a(d(E),{class:"mx-auto size-32"})]))]),t("button",{class:"btn btn-primary mt-4",onClick:e[3]||(e[3]=s=>y.value.click())}," آپلود عکس مطلب ")]),t("fieldset",Y,[t("label",Z,[r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.publish=s),type:"checkbox",checked:l.value.publish,class:"checkbox checkbox-success"},null,8,ee),[[N,l.value.publish]]),e[14]||(e[14]=b(" انتشار مطلب "))])]),t("div",te,[a(w,{"ai-use-type":"seo","ai-input":l.value.description,title:"SEO Check"},null,8,["ai-input"]),a(w,{"ai-use-type":"misspelling","ai-input":l.value.description,title:"Check Misspelling"},null,8,["ai-input"])]),t("div",{class:"text-center"},[t("button",{onClick:h,class:"btn btn-success"}," ذخیره مطلب ")])])])):V("",!0),d(n).hash=="#meta"?(u(),p("div",le,[t("div",se,[t("fieldset",oe,[e[15]||(e[15]=t("legend",{class:"fieldset-legend"},"Meta Description",-1)),r(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.meta_description=s),class:"textarea textarea-primary w-full",rows:"3",placeholder:"توضیحات ۱۵۰–۱۶۰ کاراکتری برای موتورهای جستجو"},null,512),[[_,l.value.meta_description]]),a(w,{title:"Generate Meta Description","ai-use-type":"meta_description","ai-input":f.value,onUseResponse:e[6]||(e[6]=s=>l.value.meta_description=s)},null,8,["ai-input"])]),a(x,{title:"Meta Keywords","ai-use-type":"meta_keywords","ai-input":f.value,modelValue:l.value.meta_keywords,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.meta_keywords=s),placeholder:"کلمات کلیدی با , جدا شوند"},null,8,["ai-input","modelValue"]),t("fieldset",ae,[e[16]||(e[16]=t("legend",{class:"fieldset-legend"},"Canonical URL",-1)),r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.meta_canonical=s),class:"input input-primary w-full",type:"text",placeholder:"https://example.com/post/..."},null,512),[[_,l.value.meta_canonical]])]),t("fieldset",ie,[e[18]||(e[18]=t("legend",{class:"fieldset-legend"},"Robots",-1)),r(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.meta_robots=s),class:"select select-primary w-full"},e[17]||(e[17]=[t("option",{value:"index,follow"},"index,follow",-1),t("option",{value:"noindex,nofollow"},"noindex,nofollow",-1),t("option",{value:"index,nofollow"},"index,nofollow",-1),t("option",{value:"noindex,follow"},"noindex,follow",-1)]),512),[[P,l.value.meta_robots]])]),t("div",{class:"text-center mt-6"},[t("button",{onClick:h,class:"btn btn-success"}," ذخیره مطلب ")])])])):V("",!0)])}}};export{fe as default};
