const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TipTop-DuvAUiQC.js","assets/index-vugVQ6gd.js","assets/index-B93Utos5.css","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/TipTop-CCLCb3RD.css"])))=>i.map(i=>d[i]);
import{u as A,r as k,x as E,o as P,B,h as r,b as c,m as u,w as D,k as d,d as s,e as v,v as m,q as a,c as g,E as M,t as N,z,D as R,A as b,f as j,_ as I,g as n}from"./index-vugVQ6gd.js";import{_ as q}from"./TitleBar-C_FcvJCj.js";import{u as H}from"./sidebar-Cu_BHT3E.js";import{_ as w,b as L}from"./MetaTags-_oRHsqI8.js";import{_ as O}from"./UploadFiles-B77PGXs4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"mr-auto flex gap-4 items-center"},G={role:"tablist",class:"tabs tabs-box bg-base-100/20 mr-auto border-base-100 border"},J=["src"],K={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},Q={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X={class:"fieldset"},Y={class:"border border-primary p-4 rounded-xl bg-base-100"},Z={class:"flex gap-4 justify-start mt-4"},ee={key:0,class:"mt-6"},te={class:"fieldset"},se={class:"border border-primary p-4 rounded-xl bg-base-100"},le={class:"flex gap-4 justify-start mt-4"},ie={key:0,class:"p-2 rounded-xl mt-4 bg-green-500/10 text-green-700",dir:"auto"},oe={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},ae={class:"fieldset"},de={class:"fieldset"},ne={class:"grid grid-cols-1 md:grid-cols-3"},ue={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},re={class:"label"},pe=["checked"],ve={class:"text-center"},me={key:1,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},be={key:2,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},we={__name:"ProductEpisodeManageView",setup(fe){const V=M(()=>I(()=>import("./TipTop-DuvAUiQC.js"),__vite__mapDeps([0,1,2,3,4]))),f=H(),$=A(),o=E(),C=j(),t=k({}),_=k({title:""}),T=async()=>{const i=await b.post("admin/product/info",{id:o.params.product_id});i.ok&&(_.value=i.product,o.name!="admin_product_episode_new"&&y())},y=async()=>{const i=await b.post("admin/product/episode-info",{episode_id:o.params.episode_id});i.ok&&(t.value=i.episode)},p=async()=>{const i=await b.post("admin/product/episode-save",{...t.value,product_id:o.params.product_id});i.ok&&($.showToast("عملیات با موفقیت انجام شد!","success"),o.name=="admin_product_episode_new"&&(await C.push({name:"admin_product_episode_edit",params:{product_id:o.params.product_id,episode_id:i.episode_id}}),y()))};o.name=="admin_product_episode_new"?f.setTitle("ایجاد قسمت جدید"):f.setTitle("ویرایش قسمت");const S=i=>{t.value.video_target=i.name,p()},U=i=>{t.value.video_poster=i.name,p()},h=i=>{t.value.audio=i.name,p()};P(()=>{T()});const x=B(()=>`\`\`\` 
<h1>${t.value.title}</h1> <br> ${t.value.description} 
 \`\`\` 
---
  
`);return(i,e)=>(n(),r("div",null,[c(q,{title:d(f).getTitle+" - ("+_.value.title+")"},{default:D(()=>[s("div",F,[s("div",G,[s("a",{href:"#",role:"tab",class:a(["tab",{"tab-active tab-primary":d(o).hash==""}])}," اطلاعات کلی ",2),s("a",{href:"#meta",class:a([{"tab-active":d(o).hash=="#meta"},"tab"]),role:"tab"}," متا تگ‌ها ",2),s("a",{href:"#files",class:a([{"tab-active":d(o).hash=="#files"},"tab"]),role:"tab"}," فایل ها ",2)]),s("img",{src:d(b).server+_.value.image,class:"size-10 rounded-xl",alt:""},null,8,J)])]),_:1},8,["title"]),d(o).hash==""?(n(),r("div",K,[s("div",Q,[s("div",W,[s("fieldset",X,[e[21]||(e[21]=s("legend",{class:"fieldset-legend"},"عنوان قسمت دوره",-1)),v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.title=l),class:"input input-primary w-full",type:"text",placeholder:"عنوان محصول"},null,512),[[m,t.value.title]])]),c(w,{title:"لینک قسمت","site-domain":"/","ai-use-type":"link_generator","ai-input":t.value.title,modelValue:t.value.link,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.link=l)},null,8,["ai-input","modelValue"])]),s("div",{class:a({"opacity-70":t.value.display_status==="introduction"})},[c(w,{maxlength:140,title:"توضیح کوتاه","ai-use-type":"small_description","ai-input":x.value,modelValue:t.value.small_description,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.small_description=l)},null,8,["ai-input","modelValue"])],2),s("div",{class:a({"opacity-70":t.value.display_status==="introduction"})},[e[22]||(e[22]=s("legend",{class:"fieldset-legend"},"توضیحات",-1)),(n(),g(d(V),{key:t.value.id,default:t.value.description,modelValue:t.value.description,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.description=l)},null,8,["default","modelValue"]))],2),s("div",Y,[e[24]||(e[24]=s("div",null," نوع ارائه این قسمت : ",-1)),s("div",Z,[s("button",{class:a([`${t.value.display_status==="introduction"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[4]||(e[4]=l=>t.value.display_status="introduction")}," معرفی دوره ",2),s("button",{class:a([`${t.value.display_status==="free"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[5]||(e[5]=l=>t.value.display_status="free")},"رایگان",2),s("button",{class:a([`${t.value.display_status==="free_with_login"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[6]||(e[6]=l=>t.value.display_status="free_with_login")}," رایگان با لاگین ",2),s("button",{class:a([`${t.value.display_status==="vip_preview"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[7]||(e[7]=l=>t.value.display_status="vip_preview")}," خرید+پیش‌نمایش ",2),s("button",{class:a([`${t.value.display_status==="vip"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[8]||(e[8]=l=>t.value.display_status="vip")}," خرید ",2)]),t.value.display_status=="vip_preview"?(n(),r("div",ee,[s("fieldset",te,[e[23]||(e[23]=s("legend",{class:"fieldset-legend"},"مدت زمان پیش نمایش رایگان (به ثانیه)",-1)),v(s("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.free_demo_time=l),class:"input input-primary w-full",type:"number",placeholder:""},null,512),[[m,t.value.free_demo_time]])])])):u("",!0)]),s("div",se,[e[25]||(e[25]=s("div",null," نوع ویدیو : ",-1)),s("div",le,[s("button",{class:a([`${t.value.video_type==="dash"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[10]||(e[10]=l=>t.value.video_type="dash")},"DASH",2),s("button",{class:a([`${t.value.video_type==="mp4"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[11]||(e[11]=l=>t.value.video_type="mp4")},"mp4",2)]),t.value.video_target?(n(),r("div",ie,N(t.value.video_target),1)):u("",!0)]),s("div",oe,[s("div",null,[s("fieldset",ae,[e[26]||(e[26]=s("legend",{class:"fieldset-legend"},"مدت زمان ویدیو به ثانیه",-1)),v(s("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.duration=l),class:"input input-primary w-full",type:"number",placeholder:""},null,512),[[m,t.value.duration]])])]),s("div",null,[s("fieldset",de,[e[27]||(e[27]=s("legend",{class:"fieldset-legend"},"جایگاه (برای مرتب سازی) (به صورت عدد 0 تا 100)",-1)),v(s("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.sort_index=l),class:"input input-primary w-full",type:"text",placeholder:""},null,512),[[m,t.value.sort_index]])])])]),s("div",ne,[s("fieldset",ue,[s("label",re,[v(s("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=l=>t.value.publish=l),checked:t.value.publish,class:"checkbox checkbox-success"},null,8,pe),[[R,t.value.publish]]),e[28]||(e[28]=z(" انتشار "))])])]),s("div",ve,[s("button",{onClick:e[15]||(e[15]=l=>p()),class:"btn btn-success"}," ذخیره قسمت ")])])])):u("",!0),d(o).hash=="#meta"?(n(),r("div",me,[t.value.id?(n(),g(L,{key:0,modelValue:t.value,"onUpdate:modelValue":e[16]||(e[16]=l=>t.value=l),"ai-input":x.value,onSave:e[17]||(e[17]=l=>p())},null,8,["modelValue","ai-input"])):u("",!0)])):u("",!0),d(o).hash=="#files"?(n(),r("div",be,[t.value.id?(n(),g(O,{key:0,"fetch-files-url":"admin/product/get-episode-files",onSetVideoPoster:e[18]||(e[18]=l=>U(l)),onSetVideo:e[19]||(e[19]=l=>S(l)),onSetAudio:e[20]||(e[20]=l=>h(l)),"upload-link":"admin/product/upload-episode-video",episode:t.value},null,8,["episode"])):u("",!0)])):u("",!0)]))}};export{we as default};
