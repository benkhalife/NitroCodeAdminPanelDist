import{r as d,x as U,o as A,h as o,d as l,m as f,e as u,v as n,c as S,C as M,F as T,l as B,t as m,A as x,f as C,n as L,g as i}from"./index-CmSqWVxV.js";import h from"./TipTop-CK9Y3d3n.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"p-6 mx-auto bg-base-200 w-full"},N={class:"space-y-5"},R={key:0,class:"mt-2"},q=["src"],D=["value"],F={class:"pt-4"},J=["disabled"],P={key:0},j={key:1,class:"loading loading-spinner"},E={key:0,class:"alert alert-success mt-6"},G={key:1,class:"alert alert-error mt-6"},Q={__name:"AuthorCreateView",setup(H){const w=C(),k=U(),t=d({name:"",slug:"",title:"",avatar:"",bio:"",skills:[],experience_years:0,website:"",linkedin:"",github:""}),r=d(""),p=d(!1),v=d(""),b=d(""),y=d([]),c=()=>{x.post("admin/user/admin-list",{}).then(s=>{s.ok&&(y.value=s.list)})},g=()=>{x.post("admin/authors/info",{id:t.value.id}).then(s=>{s.ok&&(t.value=s.info,r.value=JSON.parse(t.value.skills).join(", "))})};k.name=="admin_setting_manage_author_edit"&&(t.value.id=k.params.id,g());const V=()=>{p.value=!0,v.value="",b.value="",t.value.skills=r.value.split(",").map(s=>s.trim()).filter(s=>s.length>0),x.post("/admin/authors/save-author",t.value).then(async s=>{s.ok&&(v.value="✅ نویسنده با موفقیت ذخیره شد.",await w.replace({name:"admin_setting_manage_author_edit",params:{id:s.author_id}}),L(()=>{g()}))}).catch(s=>{b.value="❌ مشکلی در ذخیره اطلاعات پیش آمد.",console.error(s)}).finally(()=>{p.value=!1})};return A(()=>{c()}),(s,e)=>(i(),o("div",I,[e[22]||(e[22]=l("h1",{class:"text-2xl font-bold mb-6"},"ایجاد/ویرایش نویسنده جدید",-1)),l("div",N,[l("div",null,[e[11]||(e[11]=l("label",{class:"label"},[l("span",{class:"label-text"},"نام کامل")],-1)),u(l("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.name=a),type:"text",placeholder:"",class:"input input-bordered w-full",required:""},null,512),[[n,t.value.name]])]),l("div",null,[e[12]||(e[12]=l("label",{class:"label"},[l("span",{class:"label-text"},"نامک (Slug)")],-1)),u(l("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.slug=a),type:"text",placeholder:"مثلاً khalife",class:"input input-bordered w-full",required:""},null,512),[[n,t.value.slug]])]),l("div",null,[e[13]||(e[13]=l("label",{class:"label"},[l("span",{class:"label-text"},"عنوان تخصصی")],-1)),u(l("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.title=a),type:"text",placeholder:"برنامه‌نویس ارشد فرانت‌اند",class:"input input-bordered w-full"},null,512),[[n,t.value.title]])]),l("div",null,[e[14]||(e[14]=l("label",{class:"label"},[l("span",{class:"label-text"},"تصویر پروفایل (URL)")],-1)),u(l("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.avatar=a),type:"text",placeholder:"https://...",class:"input input-bordered w-full"},null,512),[[n,t.value.avatar]]),t.value.avatar?(i(),o("div",R,[l("img",{src:t.value.avatar,alt:"Avatar Preview",class:"w-24 h-24 rounded-full border"},null,8,q)])):f("",!0)]),l("div",null,[e[15]||(e[15]=l("label",{class:"label"},[l("span",{class:"label-text"},"بیوگرافی")],-1)),(i(),S(h,{key:t.value.id,default:t.value.bio,modelValue:t.value.bio,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.bio=a)},null,8,["default","modelValue"]))]),l("div",null,[e[16]||(e[16]=l("label",{class:"label"},[l("span",{class:"label-text"},"مهارت‌ها (با ویرگول جدا کنید)")],-1)),u(l("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>r.value=a),type:"text",placeholder:"Vue, Tailwind, JavaScript",class:"input input-bordered w-full"},null,512),[[n,r.value]])]),l("div",null,[e[17]||(e[17]=l("label",{class:"label"},[l("span",{class:"label-text"},"تجربه کاری (سال)")],-1)),u(l("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.experience_years=a),type:"number",min:"0",class:"input input-bordered w-full"},null,512),[[n,t.value.experience_years,void 0,{number:!0}]])]),l("div",null,[e[18]||(e[18]=l("label",{class:"label"},[l("span",{class:"label-text"},"LinkedIn (اختیاری)")],-1)),u(l("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.linkedin=a),type:"text",placeholder:"https://linkedin.com/...",class:"input input-bordered w-full"},null,512),[[n,t.value.linkedin]])]),l("div",null,[e[19]||(e[19]=l("label",{class:"label"},[l("span",{class:"label-text"},"GitHub (اختیاری)")],-1)),u(l("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.github=a),type:"text",placeholder:"https://github.com/...",class:"input input-bordered w-full"},null,512),[[n,t.value.github]])]),l("div",null,[e[20]||(e[20]=l("label",{class:"label"},[l("span",{class:"label-text"},"وب‌سایت شخصی (اختیاری)")],-1)),u(l("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.website=a),type:"text",placeholder:"https://...",class:"input input-bordered w-full"},null,512),[[n,t.value.website]])]),l("div",null,[u(l("select",{"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.user_id=a),class:"select"},[e[21]||(e[21]=l("option",{disabled:""},"اتصال به ادمین",-1)),(i(!0),o(T,null,B(y.value,a=>(i(),o("option",{key:a.id,value:a.id},m(a.first_name)+" "+m(a.last_name),9,D))),128))],512),[[M,t.value.user_id]])]),l("div",F,[l("button",{onClick:V,class:"btn btn-primary w-full",disabled:p.value},[p.value?(i(),o("span",j)):(i(),o("span",P,"ذخیره نویسنده"))],8,J)])]),v.value?(i(),o("div",E,m(v.value),1)):f("",!0),b.value?(i(),o("div",G,m(b.value),1)):f("",!0)]))}};export{Q as default};
