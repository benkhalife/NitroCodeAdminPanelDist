const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TipTop-ZHAanTRn.js","assets/index-IgLKa6De.js","assets/index-Bcxcgxpo.css","assets/core-CMIl3UTI.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/PhotoIcon-ExS9z39x.js","assets/TipTop-ixvC_VEZ.css"])))=>i.map(i=>d[i]);
import{u as M,r as v,H as B,J as E,h as d,b as r,m as p,w as N,k as o,d as s,e as k,v as I,c as b,M as R,A as m,G as z,L as D,_ as L,f as O,g as n,q as g}from"./index-IgLKa6De.js";import{_ as j}from"./TitleBar-DaZQ_RWY.js";import{u as q}from"./sidebar-DIujDgY8.js";import{_ as h,a as w,b as F}from"./MetaTags-BGa62s-o.js";import{_ as G}from"./UploadFiles-Co4Mh-Rg.js";import{r as H}from"./PhotoIcon-ExS9z39x.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PencilIcon-BhCYBpz6.js";const J={role:"tablist",class:"tabs tabs-box bg-base-100/20 mr-auto border-base-100 border"},K={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},Q={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},W={class:"fieldset"},X={class:""},Y={class:"rounded-lg bg-base-200 p-2 lg:p-4 flex flex-col gap-4 lg:min-w-sm"},Z={class:"text-center"},ee={class:"mt-4"},te=["src"],le={key:1,class:"mx-auto"},se={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},ae={class:"label"},oe={class:"flex flex-wrap gap-2 md:grid-cols-2"},ie={key:1,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},ne={key:2,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4 tab-active"},ge={__name:"PostManageView",setup(ue){const y=R(()=>L(()=>import("./TipTop-ZHAanTRn.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),c=q(),V=M(),i=B(),T=O(),_=async()=>{const a=await m.post("admin/post/info",{id:i.params.id});a.ok&&(e.value=a.post,e.value&&e.value.publish==="0"?e.value.publish=!1:e.value&&e.value.publish==="1"&&(e.value.publish=!0))},x=v(null),e=v({contents:[],meta:{}}),u=async()=>{const a=await m.post("admin/post/save",{...e.value});a.ok&&(V.showToast("مطلب ذخیره شد!","success"),i.name=="admin_post_new"&&(await T.push({name:"admin_post_edit",params:{id:a.post.id}}),_()))},S=a=>{const t=a.target.files[0];m.uploadFile("admin/post/upload-image",t,{},l=>{console.log(l)},l=>{console.log(l),l.ok&&(console.log(l.dir),e.value.image=l.dir)},l=>{})};i.name=="admin_post_new"?c.setTitle("ایجاد مطلب جدید"):(c.setTitle("ویرایش مطلب"),_());const C=v("https://nitrocode.ir"),f=E(()=>`\`\`\` 
<h1>${e.value.title}</h1> <br> ${e.value.description} 
 \`\`\` 
---
  
`),$=a=>{e.value.audio=a.name,u()},P=a=>{e.value.video_poster=a.name,u()},A=a=>{e.value.video_target=a.name,u()},U=a=>{console.log(typeof e.value.contents,a,e.value.contents),e.value?.contents?.subtitles||(e.value.contents.subtitles={}),e.value.contents.subtitles[a.srclang]=a,u()};return(a,t)=>(n(),d("div",null,[r(j,{title:o(c).getTitle},{default:N(()=>[s("div",J,[s("a",{href:"#",role:"tab",class:g(["tab",{"tab-active":o(i).hash===""}])}," اطلاعات مطلب ",2),s("a",{href:"#meta",role:"tab",class:g(["tab",{"tab-active":o(i).hash==="#meta"}])}," متا تگ‌ها ",2),s("a",{href:"#files",role:"tab",class:g(["tab",{"tab-active":o(i).hash==="#files"}])}," فایل‌ها ",2)])]),_:1},8,["title"]),o(i).hash==""?(n(),d("div",K,[s("div",Q,[s("fieldset",W,[t[12]||(t[12]=s("legend",{class:"fieldset-legend"},"عنوان",-1)),k(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.title=l),class:"input input-primary w-full",type:"text",placeholder:"عنوان "},null,512),[[I,e.value.title]])]),r(h,{title:"لینک مطلب","site-domain":`${C.value}/post/`,"ai-use-type":"link_generator","ai-input":e.value.title,modelValue:e.value.link,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.link=l)},null,8,["site-domain","ai-input","modelValue"]),r(h,{maxlength:140,title:"توضیح کوتاه","ai-use-type":"small_description","ai-input":f.value,modelValue:e.value.small_description,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.small_description=l)},null,8,["ai-input","modelValue"]),s("div",X,[t[13]||(t[13]=s("legend",{class:"fieldset-legend"},"متن مطلب",-1)),(n(),b(o(y),{key:e.value.id,default:e.value.description,modelValue:e.value.description,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.description=l)},null,8,["default","modelValue"]))])]),s("div",Y,[s("div",Z,[s("input",{onChange:S,ref_key:"upload_main_image",ref:x,accept:".png, .jpg, .webp",type:"file",class:"hidden"},null,544),s("div",ee,[e.value.image?(n(),d("img",{key:0,class:"max-w-72 w-full h-full mx-auto rounded-lg",src:o(m).server+e.value.image,alt:""},null,8,te)):(n(),d("div",le,[r(o(H),{class:"mx-auto size-32"})]))]),s("button",{class:"btn btn-primary mt-4",onClick:t[4]||(t[4]=l=>x.value.click())}," آپلود عکس مطلب ")]),s("fieldset",se,[s("label",ae,[k(s("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.publish=l),type:"checkbox","true-value":1,"false-value":0,class:"checkbox checkbox-success"},null,512),[[D,e.value.publish]]),t[14]||(t[14]=z(" انتشار مطلب "))])]),s("div",oe,[r(w,{"ai-use-type":"seo","ai-input":f.value,title:"SEO Check"},null,8,["ai-input"]),r(w,{"ai-use-type":"misspelling","ai-input":f.value,title:"Check Misspelling"},null,8,["ai-input"])]),s("div",{class:"text-center"},[s("button",{onClick:u,class:"btn btn-success"}," ذخیره مطلب ")])])])):p("",!0),o(i).hash=="#meta"?(n(),d("div",ie,[e.value.id?(n(),b(F,{key:0,modelValue:e.value,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value=l),"content-title-and-text":"مطالب سئو",onSave:t[7]||(t[7]=l=>u())},null,8,["modelValue"])):p("",!0)])):p("",!0),o(i).hash=="#files"?(n(),d("div",ne,[e.value.id?(n(),b(G,{key:0,episode:e.value,"upload-link":"admin/post/upload-post-video","fetch-files-url":"admin/post/get-post-files","delete-file-url":"admin/post/delete-post-file",onSetAudio:t[8]||(t[8]=l=>$(l)),onSetVideo:t[9]||(t[9]=l=>A(l)),onSetVideoPoster:t[10]||(t[10]=l=>P(l)),onSetSubtitle:t[11]||(t[11]=l=>U(l))},null,8,["episode"])):p("",!0)])):p("",!0)]))}};export{ge as default};
