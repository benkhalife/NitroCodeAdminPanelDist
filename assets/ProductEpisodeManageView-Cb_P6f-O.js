import{u as $,r as _,x as C,o as V,h as m,b as T,m as b,w as U,k as c,d as t,e as d,v as a,c as j,q as n,z as M,C as P,A as u,P as B,f as E,g as r}from"./index-DFEHhRVU.js";import{_ as N}from"./TextEditor-CD1Lxf7F.js";import{_ as S}from"./TitleBar-Cmt-vUdp.js";import{u as z}from"./sidebar-VPZrFHnp.js";const A={class:"mr-auto"},L=["src"],I={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},R={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},D={class:"fieldset"},F={class:"fieldset flex-1"},G={class:"join"},H={class:"fieldset"},h={class:""},J={class:"border border-primary p-4 rounded-xl bg-base-100"},K={class:"flex gap-4 justify-start mt-4"},O={key:0,class:"mt-6"},Q={class:"fieldset"},W={class:"border border-primary p-4 rounded-xl bg-base-100"},X={class:"flex gap-4 justify-start mt-4"},Y={class:"fieldset"},Z={class:"grid grid-cols-1 md:grid-cols-3"},ee={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},te={class:"label"},se=["checked"],le={class:"text-center"},ue={__name:"ProductEpisodeManageView",setup(ie){const p=z(),g=$(),o=C(),y=E(),s=_({}),v=_({title:""}),k=async()=>{const i=await u.post("admin/product/info",{id:o.params.product_id});i.ok&&(v.value=i.product,o.name!="admin_product_episode_new"&&f())},f=async()=>{const i=await u.post("admin/product/episode-info",{episode_id:o.params.episode_id});i.ok&&(s.value=i.episode)},x=async()=>{const i=await u.post("admin/product/episode-save",{...s.value,product_id:o.params.product_id});i.ok&&(g.showToast("عملیات با موفقیت انجام شد!","success"),o.name=="admin_product_episode_new"&&(await y.push({name:"admin_product_episode_edit",params:{product_id:o.params.product_id,episode_id:i.episode_id}}),f()))};o.name=="admin_product_episode_new"?p.setTitle("ایجاد قسمت جدید"):p.setTitle("ویرایش قسمت");const w=()=>{s.value.link=B(s.value.title)};return V(()=>{k()}),(i,e)=>(r(),m("div",null,[T(S,{title:c(p).getTitle+" - ("+v.value.title+")"},{default:U(()=>[t("div",A,[t("img",{src:c(u).server+v.value.image,class:"size-10 rounded-xl",alt:""},null,8,L)])]),_:1},8,["title"]),c(o).hash==""?(r(),m("div",I,[t("div",R,[t("div",q,[t("fieldset",D,[e[15]||(e[15]=t("legend",{class:"fieldset-legend"},"عنوان قسمت دوره",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.title=l),class:"input input-primary w-full",type:"text",placeholder:"عنوان محصول"},null,512),[[a,s.value.title]])]),t("fieldset",F,[e[16]||(e[16]=t("legend",{class:"fieldset-legend"},"لینک قسمت",-1)),t("div",G,[t("button",{onClick:e[1]||(e[1]=l=>w()),class:"btn btn-secondary opacity-50 join-item"},"G/A"),d(t("input",{class:"w-full join-item input",type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>s.value.link=l),placeholder:"لینک محصول"},null,512),[[a,s.value.link]])])])]),t("div",null,[t("fieldset",H,[e[17]||(e[17]=t("legend",{class:"fieldset-legend"},"توضیحات کوتاه",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.small_description=l),class:"input input-primary w-full",type:"text",placeholder:""},null,512),[[a,s.value.small_description]])])]),t("div",h,[e[18]||(e[18]=t("legend",{class:"fieldset-legend"},"توضیحات",-1)),(r(),j(N,{key:s.value.id,value:s.value.description,onInput:e[4]||(e[4]=l=>s.value.description=l)},null,8,["value"]))]),t("div",J,[e[20]||(e[20]=t("div",null," نوع ارائه این قسمت : ",-1)),t("div",K,[t("button",{class:n([`${s.value.display_status==="free"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[5]||(e[5]=l=>s.value.display_status="free")},"رایگان",2),t("button",{class:n([`${s.value.display_status==="free_with_login"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[6]||(e[6]=l=>s.value.display_status="free_with_login")},"رایگان با لاگین",2),t("button",{class:n([`${s.value.display_status==="vip_preview"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[7]||(e[7]=l=>s.value.display_status="vip_preview")},"خرید+پیش‌نمایش",2),t("button",{class:n([`${s.value.display_status==="vip"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[8]||(e[8]=l=>s.value.display_status="vip")},"خرید",2)]),s.value.display_status=="vip_preview"?(r(),m("div",O,[t("fieldset",Q,[e[19]||(e[19]=t("legend",{class:"fieldset-legend"},"مدت زمان پیش نمایش رایگان (به ثانیه)",-1)),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>s.value.free_demo_time=l),class:"input input-primary w-full",type:"number",placeholder:""},null,512),[[a,s.value.free_demo_time]])])])):b("",!0)]),t("div",W,[e[21]||(e[21]=t("div",null," نوع ویدیو : ",-1)),t("div",X,[t("button",{class:n([`${s.value.video_type==="hls"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[10]||(e[10]=l=>s.value.video_type="hls")},"HLS",2),t("button",{class:n([`${s.value.video_type==="mp4"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[11]||(e[11]=l=>s.value.video_type="mp4")},"mp4",2)])]),t("div",null,[t("fieldset",Y,[e[22]||(e[22]=t("legend",{class:"fieldset-legend"},"جاییگاه (برای مرتب سازی) (به صورت عدد 0 تا 100)",-1)),d(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>s.value.sort_index=l),class:"input input-primary w-full",type:"text",placeholder:""},null,512),[[a,s.value.sort_index]])])]),t("div",Z,[t("fieldset",ee,[t("label",te,[d(t("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=l=>s.value.publish=l),checked:s.value.publish,class:"checkbox checkbox-success"},null,8,se),[[P,s.value.publish]]),e[23]||(e[23]=M(" انتشار "))])])]),t("div",le,[t("button",{onClick:e[14]||(e[14]=l=>x()),class:"btn btn-success"}," ذخیره قسمت ")])])])):b("",!0)]))}};export{ue as default};
