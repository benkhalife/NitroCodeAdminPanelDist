const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TipTop-BwBJK-VW.js","assets/index-CIJH_hvF.js","assets/index-yaJ3gvEb.css","assets/core-CMIl3UTI.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/PhotoIcon-BCmzlo_B.js","assets/TipTop-ixvC_VEZ.css"])))=>i.map(i=>d[i]);
import{u as B,r as x,I as D,o as F,G as L,h as u,b as y,m as v,w as I,k as n,d as t,e as r,v as f,q as a,c as w,M as R,t as j,H as z,L as H,F as O,l as q,A as b,f as G,_ as K,g as d,K as g,N as J}from"./index-CIJH_hvF.js";import{_ as Q}from"./TitleBar-CAv2-Rta.js";import{u as W}from"./sidebar-B4JlW22M.js";import{_ as $,b as X}from"./MetaTags-CStYapSX.js";import{_ as Y}from"./UploadFiles-BU8h2hVe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PencilIcon-Dn6zHdLU.js";const Z={class:"mr-auto flex gap-4 items-center"},ee={role:"tablist",class:"tabs tabs-box bg-base-100/20 mr-auto border-base-100 border"},te=["src"],le={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},se={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ie={class:"fieldset"},ae={class:"border border-primary p-4 rounded-xl bg-base-100"},de={class:"flex gap-4 justify-start mt-4"},ne={key:0,class:"mt-6"},ue={class:"fieldset"},re={class:"border border-primary p-4 rounded-xl bg-base-100"},pe={class:"flex gap-4 justify-start mt-4"},ve={key:0,class:"p-2 rounded-xl mt-4 bg-green-500/10 text-green-700",dir:"auto"},me={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},fe={class:"fieldset"},be={class:"fieldset"},ge={class:"grid grid-cols-1 md:grid-cols-3"},ce={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},_e={class:"label"},ye={class:"text-center"},we={key:1,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},Ve={key:2,class:"flex flex-col gap-4 w-full mt-4 py-4"},ke={key:0,class:"flex flex-col gap-4"},xe={class:"grid grid-cols-1 md:grid-cols-4 gap-3"},$e=["value"],Ce=["onUpdate:modelValue"],Ue=["onUpdate:modelValue"],Se=["onUpdate:modelValue"],Te=["onUpdate:modelValue"],he={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Me={dir:"ltr"},Pe=["onUpdate:modelValue"],Ae={key:3,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},je={__name:"ProductEpisodeManageView",setup(Ee){const C=R(()=>K(()=>import("./TipTop-BwBJK-VW.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),c=W(),U=B(),i=D(),S=G(),l=x({}),_=x({title:""}),T=async()=>{const o=await b.post("admin/product/info",{id:i.params.product_id});o.ok&&(_.value=o.product,i.name!="admin_product_episode_new"&&V())},V=async()=>{const o=await b.post("admin/product/episode-info",{episode_id:i.params.episode_id});o.ok&&(l.value=o.episode)},m=async()=>{const o=await b.post("admin/product/episode-save",{...l.value,product_id:i.params.product_id});o.ok&&(U.showToast("عملیات با موفقیت انجام شد!","success"),i.name=="admin_product_episode_new"&&(await S.push({name:"admin_product_episode_edit",params:{product_id:i.params.product_id,episode_id:o.episode_id}}),V()))};i.name=="admin_product_episode_new"?c.setTitle("ایجاد قسمت جدید"):c.setTitle("ویرایش قسمت");const h=o=>{l.value.video_target=o.name,m()},M=o=>{l.value.video_preview_target=o.name,m()},P=o=>{l.value.video_poster=o.name,m()},A=o=>{l.value.audio=o.name,m()};F(()=>{T()});const k=L(()=>`\`\`\` 
<h1>${l.value.title}</h1> <br> ${l.value.description} 
 \`\`\` 
---
  
`),E=o=>{l.value.extentions.push(o)};return(o,e)=>(d(),u("div",null,[y(Q,{title:n(c).getTitle+" - ("+_.value.title+")"},{default:I(()=>[t("div",Z,[t("div",ee,[t("a",{href:"#",role:"tab",class:a(["tab",{"tab-active tab-primary":n(i).hash==""}])}," اطلاعات کلی ",2),t("a",{href:"#meta",class:a([{"tab-active":n(i).hash=="#meta"},"tab"]),role:"tab"}," متا تگ‌ها ",2),t("a",{href:"#extentions",class:a([{"tab-active":n(i).hash=="#extentions"},"tab"]),role:"tab"}," افزونه‌ها ",2),t("a",{href:"#files",class:a([{"tab-active":n(i).hash=="#files"},"tab"]),role:"tab"}," فایل ها ",2)]),t("img",{src:n(b).server+_.value.image,class:"size-10 rounded-xl",alt:""},null,8,te)])]),_:1},8,["title"]),n(i).hash==""?(d(),u("div",le,[t("div",se,[t("div",oe,[t("fieldset",ie,[e[23]||(e[23]=t("legend",{class:"fieldset-legend"},"عنوان قسمت دوره",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.title=s),class:"input input-primary w-full",type:"text",placeholder:"عنوان محصول"},null,512),[[f,l.value.title]])]),y($,{title:"لینک قسمت","site-domain":"/","ai-use-type":"link_generator","ai-input":l.value.title,modelValue:l.value.link,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.link=s)},null,8,["ai-input","modelValue"])]),t("div",{class:a({"opacity-70":l.value.display_status==="introduction"})},[y($,{maxlength:140,title:"توضیح کوتاه","ai-use-type":"small_description","ai-input":k.value,modelValue:l.value.small_description,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.small_description=s)},null,8,["ai-input","modelValue"])],2),t("div",{class:a({"opacity-70":l.value.display_status==="introduction"})},[e[24]||(e[24]=t("legend",{class:"fieldset-legend"},"توضیحات",-1)),(d(),w(n(C),{key:l.value.id,default:l.value.description,modelValue:l.value.description,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.description=s)},null,8,["default","modelValue"]))],2),t("div",ae,[e[26]||(e[26]=t("div",null," نوع ارائه این قسمت : ",-1)),t("div",de,[t("button",{class:a([`${l.value.display_status==="introduction"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[4]||(e[4]=s=>l.value.display_status="introduction")}," معرفی دوره ",2),t("button",{class:a([`${l.value.display_status==="free"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[5]||(e[5]=s=>l.value.display_status="free")},"رایگان",2),t("button",{class:a([`${l.value.display_status==="free_with_login"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[6]||(e[6]=s=>l.value.display_status="free_with_login")}," رایگان با لاگین ",2),t("button",{class:a([`${l.value.display_status==="vip_preview"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[7]||(e[7]=s=>l.value.display_status="vip_preview")}," خرید+پیش‌نمایش ",2),t("button",{class:a([`${l.value.display_status==="vip"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[8]||(e[8]=s=>l.value.display_status="vip")}," خرید ",2)]),l.value.display_status=="vip_preview"?(d(),u("div",ne,[t("fieldset",ue,[e[25]||(e[25]=t("legend",{class:"fieldset-legend"},"مدت زمان پیش نمایش رایگان (به ثانیه)",-1)),r(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.free_demo_time=s),class:"input input-primary w-full",type:"number",placeholder:""},null,512),[[f,l.value.free_demo_time]])])])):v("",!0)]),t("div",re,[e[27]||(e[27]=t("div",null," نوع ویدیو : ",-1)),t("div",pe,[t("button",{class:a([`${l.value.video_type==="dash"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[10]||(e[10]=s=>l.value.video_type="dash")},"DASH",2),t("button",{class:a([`${l.value.video_type==="mp4"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[11]||(e[11]=s=>l.value.video_type="mp4")},"mp4",2)]),l.value.video_target?(d(),u("div",ve,j(l.value.video_target),1)):v("",!0)]),t("div",me,[t("div",null,[t("fieldset",fe,[e[28]||(e[28]=t("legend",{class:"fieldset-legend"},"مدت زمان ویدیو به ثانیه",-1)),r(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>l.value.duration=s),class:"input input-primary w-full",type:"number",placeholder:""},null,512),[[f,l.value.duration]])])]),t("div",null,[t("fieldset",be,[e[29]||(e[29]=t("legend",{class:"fieldset-legend"},"جایگاه (برای مرتب سازی) (به صورت عدد 0 تا 100)",-1)),r(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>l.value.sort_index=s),class:"input input-primary w-full",type:"text",placeholder:""},null,512),[[f,l.value.sort_index]])])])]),t("div",ge,[t("fieldset",ce,[t("label",_e,[r(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=s=>l.value.publish=s),"true-value":1,"false-value":0,class:"checkbox checkbox-success"},null,512),[[H,l.value.publish]]),e[30]||(e[30]=z(" انتشار "))])])]),t("div",ye,[t("button",{onClick:e[15]||(e[15]=s=>m()),class:"btn btn-success"}," ذخیره قسمت ")])])])):v("",!0),n(i).hash=="#meta"?(d(),u("div",we,[l.value.id?(d(),w(X,{key:0,modelValue:l.value,"onUpdate:modelValue":e[16]||(e[16]=s=>l.value=s),"ai-input":k.value,onSave:e[17]||(e[17]=s=>m())},null,8,["modelValue","ai-input"])):v("",!0)])):v("",!0),n(i).hash=="#extentions"?(d(),u("div",Ve,[t("button",{onClick:e[18]||(e[18]=s=>E({type:"livecodes",config:{view:"split",markup:{}},params:{console:"close"}})),class:"btn"},"add CodeEditor"),(d(!0),u(O,null,q(l.value?.extentions||[],(s,N)=>(d(),u("div",{key:N,class:"flex flex-col gap-4"},[s.type==="livecodes"?(d(),u("div",ke,[t("div",xe,[t("div",null,[e[31]||(e[31]=t("div",null,"Component Type",-1)),t("input",{class:"input w-full",type:"text",placeholder:"type",readonly:"true",value:s.type},null,8,$e)]),t("div",null,[e[33]||(e[33]=t("div",null,"View",-1)),r(t("select",{class:"select w-full","onUpdate:modelValue":p=>s.config.view=p},e[32]||(e[32]=[t("option",{disabled:"",value:""},"View Mode",-1),t("option",{value:"split"},"split",-1),t("option",{value:"editor"},"editor",-1),t("option",{value:"result"},"result",-1)]),8,Ce),[[g,s.config.view]])]),t("div",null,[e[35]||(e[35]=t("div",null,"Console Mode",-1)),r(t("select",{class:"select w-full","onUpdate:modelValue":p=>s.params.console=p},e[34]||(e[34]=[J('<option disabled value="">Console</option><option value="open">Open</option><option value="full">Full</option><option value="close">Close</option><option value="none">None</option>',5)]),8,Ue),[[g,s.params.console]])]),t("div",null,[e[37]||(e[37]=t("div",null,"Language",-1)),r(t("select",{class:"select w-full","onUpdate:modelValue":p=>s.config.markup.language=p},e[36]||(e[36]=[t("option",{value:"html"},"html",-1),t("option",{value:"php"},"php",-1),t("option",{value:"python"},"python",-1)]),8,Se),[[g,s.config.markup.language]])]),t("div",null,[e[39]||(e[39]=t("div",null,"Show Status",-1)),r(t("select",{class:"select w-full","onUpdate:modelValue":p=>s.show_status=p},e[38]||(e[38]=[t("option",{value:"force_show"},"Force Show",-1),t("option",{value:"button"},"Button",-1)]),8,Te),[[g,s.show_status]])])]),t("div",he,[t("div",Me,[e[40]||(e[40]=t("div",null,"Markup",-1)),r(t("textarea",{class:"textarea","onUpdate:modelValue":p=>s.config.markup.content=p},null,8,Pe),[[f,s.config.markup.content]])])])])):v("",!0)]))),128))])):v("",!0),n(i).hash=="#files"?(d(),u("div",Ae,[l.value.id?(d(),w(Y,{key:0,"fetch-files-url":"admin/product/get-episode-files",onSetVideoPoster:e[19]||(e[19]=s=>P(s)),onSetVideo:e[20]||(e[20]=s=>h(s)),onSetVideoPreview:e[21]||(e[21]=s=>M(s)),onSetAudio:e[22]||(e[22]=s=>A(s)),"rename-file-url":"admin/product/rename-episode-file","upload-link":"admin/product/upload-episode-video",episode:l.value},null,8,["episode"])):v("",!0)])):v("",!0)]))}};export{je as default};
