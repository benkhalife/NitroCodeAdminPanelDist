import{u as U,r as v,x as M,B as N,h as r,b as i,m as f,w as _,k as u,d as s,e as h,v as P,c as w,A as p,z as g,D as R,f as z,j as A,g as d,q as y}from"./index-oBUesopq.js";import{_ as V,a as I,b as C,c as j}from"./MetaTags-CPoCo-zI.js";import{_ as D}from"./TitleBar-DIh_73dU.js";import{u as E}from"./sidebar-C-esjiO9.js";import{r as L}from"./PhotoIcon-_CrP_4NM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={role:"tablist",class:"tabs tabs-box"},F={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},O={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},G={class:"fieldset"},H={class:""},J={class:"rounded-lg bg-base-200 p-2 lg:p-4 flex flex-col gap-4 lg:min-w-sm"},K={class:"text-center"},Q={class:"mt-4"},W=["src"],X={key:1,class:"mx-auto"},Y={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},Z={class:"label"},ee=["checked"],te={class:"flex flex-wrap gap-2 md:grid-cols-2"},se={key:1,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},re={__name:"PostManageView",setup(le){const m=E(),$=U(),n=M(),T=z(),b=async()=>{const o=await p.post("admin/post/info",{id:n.params.id});o.ok&&(t.value=o.post)},x=v(null),t=v({contents:[],meta:{}}),k=async()=>{const o=await p.post("admin/post/save",{...t.value});o.ok&&($.showToast("مطلب ذخیره شد!","success"),n.name=="admin_post_new"&&(await T.push({name:"admin_post_edit",params:{id:o.post.id}}),b()))},B=o=>{const e=o.target.files[0];p.uploadFile("admin/post/upload-image",e,{},a=>{console.log(a)},a=>{console.log(a),a.ok&&(console.log(a.dir),t.value.image=a.dir)},a=>{})};n.name=="admin_post_new"?m.setTitle("ایجاد مطلب جدید"):(m.setTitle("ویرایش مطلب"),b());const S=v("https://nitrocode.ir"),c=N(()=>`\`\`\` 
<h1>${t.value.title}</h1> <br> ${t.value.description} 
 \`\`\` 
---
  
`);return(o,e)=>{const a=A("RouterLink");return d(),r("div",null,[i(D,{title:u(m).getTitle},{default:_(()=>[s("div",q,[i(a,{to:{hash:""},role:"tab",class:y(["tab",{"tab-active tab-primary":u(n).hash==""}])},{default:_(()=>e[8]||(e[8]=[g(" اطلاعات مطلب ")])),_:1,__:[8]},8,["class"]),i(a,{to:{hash:"#meta"},role:"tab",class:y(["tab",{"tab-active tab-primary":u(n).hash=="#meta"}])},{default:_(()=>e[9]||(e[9]=[g(" متا تگ‌ها ")])),_:1,__:[9]},8,["class"])])]),_:1},8,["title"]),u(n).hash==""?(d(),r("div",F,[s("div",O,[s("fieldset",G,[e[10]||(e[10]=s("legend",{class:"fieldset-legend"},"عنوان",-1)),h(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.title=l),class:"input input-primary w-full",type:"text",placeholder:"عنوان "},null,512),[[P,t.value.title]])]),i(V,{title:"لینک مطلب","site-domain":`${S.value}/post/`,"ai-use-type":"link_generator","ai-input":t.value.title,modelValue:t.value.link,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.link=l)},null,8,["site-domain","ai-input","modelValue"]),i(V,{maxlength:140,title:"توضیح کوتاه","ai-use-type":"small_description","ai-input":c.value,modelValue:t.value.small_description,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.small_description=l)},null,8,["ai-input","modelValue"]),s("div",H,[e[11]||(e[11]=s("legend",{class:"fieldset-legend"},"متن مطلب",-1)),(d(),w(I,{key:t.value.id,value:t.value.description,onInput:e[3]||(e[3]=l=>t.value.description=l)},null,8,["value"]))])]),s("div",J,[s("div",K,[s("input",{onChange:B,ref_key:"upload_main_image",ref:x,accept:".png, .jpg, .webp",type:"file",class:"hidden"},null,544),s("div",Q,[t.value.image?(d(),r("img",{key:0,class:"max-w-72 w-full h-full mx-auto rounded-lg",src:u(p).server+t.value.image,alt:""},null,8,W)):(d(),r("div",X,[i(u(L),{class:"mx-auto size-32"})]))]),s("button",{class:"btn btn-primary mt-4",onClick:e[4]||(e[4]=l=>x.value.click())}," آپلود عکس مطلب ")]),s("fieldset",Y,[s("label",Z,[h(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.publish=l),type:"checkbox",checked:t.value.publish,class:"checkbox checkbox-success"},null,8,ee),[[R,t.value.publish]]),e[12]||(e[12]=g(" انتشار مطلب "))])]),s("div",te,[i(C,{"ai-use-type":"seo","ai-input":c.value,title:"SEO Check"},null,8,["ai-input"]),i(C,{"ai-use-type":"misspelling","ai-input":c.value,title:"Check Misspelling"},null,8,["ai-input"])]),s("div",{class:"text-center"},[s("button",{onClick:k,class:"btn btn-success"}," ذخیره مطلب ")])])])):f("",!0),u(n).hash=="#meta"?(d(),r("div",se,[t.value.id?(d(),w(j,{key:0,modelValue:t.value,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value=l),"content-title-and-text":"مطالب سئو",onSave:e[7]||(e[7]=l=>k())},null,8,["modelValue"])):f("",!0)])):f("",!0)])}}};export{re as default};
