import{u as k,r as f,x as $,o as C,h as c,b as V,m as b,w as T,k as m,d as t,e as n,v as d,c as U,q as a,z as B,D as M,A as u,f as N,g as r}from"./index-BgbRNVau.js";import{_ as S}from"./TextEditor-BVsPOJT_.js";import{_ as z}from"./TitleBar-GDK6WCn_.js";import{u as P}from"./sidebar-CH8H9QsY.js";const h={class:"mr-auto"},j=["src"],A={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},D={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},I={class:"fieldset"},R={class:"fieldset"},q={class:""},E={class:"border border-primary p-4 rounded-xl bg-base-100"},H={class:"flex gap-4 justify-start mt-4"},L={key:0,class:"mt-6"},F={class:"fieldset"},G={class:"border border-primary p-4 rounded-xl bg-base-100"},J={class:"flex gap-4 justify-start mt-4"},K={class:"fieldset"},O={class:"grid grid-cols-1 md:grid-cols-3"},Q={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},W={class:"label"},X=["checked"],Y={class:"text-center"},oe={__name:"ProductCourseManageView",setup(Z){const p=P(),y=k(),i=$(),g=N(),s=f({}),v=f({title:""}),x=async()=>{const o=await u.post("admin/product/info",{id:i.params.product_id});o.ok&&(v.value=o.product,i.name!="admin_product_course_new"&&_())},_=async()=>{const o=await u.post("admin/product/course-info",{course_id:i.params.course_id});o.ok&&(s.value=o.course)},w=async()=>{const o=await u.post("admin/product/course-save",{...s.value,product_id:i.params.product_id});o.ok&&(y.showToast("عملیات با موفقیت انجام شد!","success"),i.name=="admin_product_course_new"&&(await g.push({name:"admin_product_course_edit",params:{product_id:i.params.product_id,course_id:o.course_id}}),_()))};return i.name=="admin_product_course_new"?p.setTitle("ایجاد قسمت جدید"):p.setTitle("ویرایش قسمت"),C(()=>{x()}),(o,e)=>(r(),c("div",null,[V(z,{title:m(p).getTitle+" - ("+v.value.title+")"},{default:T(()=>[t("div",h,[t("img",{src:m(u).server+v.value.image,class:"size-10 rounded-xl",alt:""},null,8,j)])]),_:1},8,["title"]),m(i).hash==""?(r(),c("div",A,[t("div",D,[t("fieldset",I,[e[13]||(e[13]=t("legend",{class:"fieldset-legend"},"عنوان قسمت دوره",-1)),n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.title=l),class:"input input-primary w-full",type:"text",placeholder:"عنوان محصول"},null,512),[[d,s.value.title]])]),t("div",null,[t("fieldset",R,[e[14]||(e[14]=t("legend",{class:"fieldset-legend"},"توضیحات کوتاه",-1)),n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.small_description=l),class:"input input-primary w-full",type:"text",placeholder:""},null,512),[[d,s.value.small_description]])])]),t("div",q,[e[15]||(e[15]=t("legend",{class:"fieldset-legend"},"توضیحات",-1)),(r(),U(S,{key:s.value.id,value:s.value.description,onInput:e[2]||(e[2]=l=>s.value.description=l)},null,8,["value"]))]),t("div",E,[e[17]||(e[17]=t("div",null," نوع ارائه این قسمت : ",-1)),t("div",H,[t("button",{class:a([`${s.value.display_status==="free"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[3]||(e[3]=l=>s.value.display_status="free")},"رایگان",2),t("button",{class:a([`${s.value.display_status==="free_with_login"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[4]||(e[4]=l=>s.value.display_status="free_with_login")},"رایگان با لاگین",2),t("button",{class:a([`${s.value.display_status==="vip_preview"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[5]||(e[5]=l=>s.value.display_status="vip_preview")},"خرید+پیش‌نمایش",2),t("button",{class:a([`${s.value.display_status==="vip"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[6]||(e[6]=l=>s.value.display_status="vip")},"خرید",2)]),s.value.display_status=="vip_preview"?(r(),c("div",L,[t("fieldset",F,[e[16]||(e[16]=t("legend",{class:"fieldset-legend"},"مدت زمان پیش نمایش رایگان (به ثانیه)",-1)),n(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.free_demo_time=l),class:"input input-primary w-full",type:"number",placeholder:""},null,512),[[d,s.value.free_demo_time]])])])):b("",!0)]),t("div",G,[e[18]||(e[18]=t("div",null," نوع ویدیو : ",-1)),t("div",J,[t("button",{class:a([`${s.value.video_type==="hls"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[8]||(e[8]=l=>s.value.video_type="hls")},"HLS",2),t("button",{class:a([`${s.value.video_type==="mp4"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[9]||(e[9]=l=>s.value.video_type="mp4")},"mp4",2)])]),t("div",null,[t("fieldset",K,[e[19]||(e[19]=t("legend",{class:"fieldset-legend"},"جاییگاه (برای مرتب سازی) (به صورت عدد 0 تا 100)",-1)),n(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>s.value.sort_index=l),class:"input input-primary w-full",type:"text",placeholder:""},null,512),[[d,s.value.sort_index]])])]),t("div",O,[t("fieldset",Q,[t("label",W,[n(t("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=l=>s.value.publish=l),checked:s.value.publish,class:"checkbox checkbox-success"},null,8,X),[[M,s.value.publish]]),e[20]||(e[20]=B(" انتشار "))])])]),t("div",Y,[t("button",{onClick:e[12]||(e[12]=l=>w()),class:"btn btn-success"}," ذخیره قسمت ")])])])):b("",!0)]))}};export{oe as default};
