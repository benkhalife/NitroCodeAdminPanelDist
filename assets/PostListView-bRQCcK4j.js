import{u as b}from"./sidebar-BpmewVda.js";import{_ as h}from"./TitleBar-DR0JUykN.js";import{_ as w}from"./AddButton-BgzPAFsT.js";import{_ as k}from"./ComInput-BHtqcByL.js";import{j as $,h as p,g as m,d as t,k as u,A as _,t as v,b as a,w as x,S as y,r as g,F as B,l as C,f as P,c as V}from"./index-CRyfOyhw.js";import{r as L}from"./TrashIcon-5qr0LKSy.js";import{r as S}from"./PencilIcon-CbM6T6cH.js";import"./PlusIcon-BorZlqPL.js";const N={class:"flex items-center gap-4 p-2 rounded-lg shadow-sm shadow-primary/20 bg-base-200"},R=["src"],T={class:"flex-1"},z={class:"text-content-primary/20 text-sm"},A={class:"text-lg font-bold mt-1"},D={class:"flex gap-2 px-2"},E={__name:"PostItem",props:{post:{default:""}},emits:["deleted"],setup(l,{emit:f}){const o=l,d=f,r=async c=>{(await y.fire({title:"مطلب حذف شود؟",icon:"error",confirmButtonText:"بله حذف شود",cancelButtonText:"لغو",showCancelButton:!0})).isConfirmed&&(await _.post("admin/post/remove",{id:c})).ok&&d("deleted",o.post)};return(c,e)=>{const n=$("RouterLink");return m(),p("div",N,[t("div",null,[t("img",{class:"w-16 h-16 rounded-lg",src:u(_).server+o.post.image,alt:""},null,8,R)]),t("div",T,[t("div",z," شناسه : "+v(o.post.id),1),t("div",A,v(o.post.title),1)]),t("div",D,[t("button",{onClick:e[0]||(e[0]=s=>r(l.post.id)),class:"cursor-pointer block hover:bg-red-500/20 text-error duration-200 p-2 rounded-lg border border-error"},[a(u(L),{class:"size-6"})]),a(n,{to:{name:"admin_post_edit",params:{id:l.post.id}},class:"cursor-pointer block hover:bg-white/20 duration-200 p-2 rounded-lg border"},{default:x(()=>[a(u(S),{class:"size-6"})]),_:1},8,["to"])])])}}},F={class:"mt-8 flex flex-col gap-4"},Q={__name:"PostListView",setup(l){b().setTitle("لیست مطالب");const o=P(),d=g([]),r=g(""),c=()=>{o.push({name:"admin_post_new"})},e=async()=>{console.log(r.value);const n=await _.post("admin/post/list",{search:r.value});n.ok&&(d.value=n.list)};return e(),(n,s)=>(m(),p("div",null,[a(h,{title:"لیست مطالب"},{default:x(()=>[a(k,{onEnter:s[0]||(s[0]=i=>e()),placeholder:"جستجو ...",class:"flex-1","input-class":"input-primary",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"]),a(w,{onClick:c,title:"افزودن مطلب جدید"})]),_:1}),t("div",F,[(m(!0),p(B,null,C(d.value.data,(i,I)=>(m(),V(E,{onDeleted:s[2]||(s[2]=j=>e()),key:i.id,post:i},null,8,["post"]))),128))])]))}};export{Q as default};
