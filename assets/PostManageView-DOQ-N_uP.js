const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TipTop-6qoMr6BX.js","assets/index-TNpUWidO.js","assets/index-DRwB4UB0.css","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/TipTop-CfTdH8bi.css"])))=>i.map(i=>d[i]);
import{u as B,r as v,x as R,B as S,h as r,b as i,m as f,w as _,k as n,d as s,e as h,v as E,c as w,G as M,A as p,z as g,D as N,_ as z,f as D,j as I,g as d,q as y}from"./index-TNpUWidO.js";import{_ as L}from"./TitleBar-BqXKQP5i.js";import{u as j}from"./sidebar-Cou4TY4e.js";import{_ as V,a as T,b as O}from"./MetaTags-DoklDcok.js";import{r as q}from"./PhotoIcon-DpmBh4-P.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={role:"tablist",class:"tabs tabs-box"},G={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},H={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},J={class:"fieldset"},K={class:""},Q={class:"rounded-lg bg-base-200 p-2 lg:p-4 flex flex-col gap-4 lg:min-w-sm"},W={class:"text-center"},X={class:"mt-4"},Y=["src"],Z={key:1,class:"mx-auto"},ee={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},te={class:"label"},se=["checked"],le={class:"flex flex-wrap gap-2 md:grid-cols-2"},ae={key:1,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},me={__name:"PostManageView",setup(oe){const C=M(()=>z(()=>import("./TipTop-6qoMr6BX.js"),__vite__mapDeps([0,1,2,3,4]))),m=j(),$=B(),u=R(),P=D(),b=async()=>{const o=await p.post("admin/post/info",{id:u.params.id});o.ok&&(t.value=o.post,t.value&&t.value.publish==="0"&&(t.value.publish=!1))},x=v(null),t=v({contents:[],meta:{}}),k=async()=>{const o=await p.post("admin/post/save",{...t.value});o.ok&&($.showToast("مطلب ذخیره شد!","success"),u.name=="admin_post_new"&&(await P.push({name:"admin_post_edit",params:{id:o.post.id}}),b()))},U=o=>{const e=o.target.files[0];p.uploadFile("admin/post/upload-image",e,{},a=>{console.log(a)},a=>{console.log(a),a.ok&&(console.log(a.dir),t.value.image=a.dir)},a=>{})};u.name=="admin_post_new"?m.setTitle("ایجاد مطلب جدید"):(m.setTitle("ویرایش مطلب"),b());const A=v("https://nitrocode.ir"),c=S(()=>`\`\`\` 
<h1>${t.value.title}</h1> <br> ${t.value.description} 
 \`\`\` 
---
  
`);return(o,e)=>{const a=I("RouterLink");return d(),r("div",null,[i(L,{title:n(m).getTitle},{default:_(()=>[s("div",F,[i(a,{to:{hash:""},role:"tab",class:y(["tab",{"tab-active tab-primary":n(u).hash==""}])},{default:_(()=>e[8]||(e[8]=[g(" اطلاعات مطلب ")])),_:1,__:[8]},8,["class"]),i(a,{to:{hash:"#meta"},role:"tab",class:y(["tab",{"tab-active tab-primary":n(u).hash=="#meta"}])},{default:_(()=>e[9]||(e[9]=[g(" متا تگ‌ها ")])),_:1,__:[9]},8,["class"])])]),_:1},8,["title"]),n(u).hash==""?(d(),r("div",G,[s("div",H,[s("fieldset",J,[e[10]||(e[10]=s("legend",{class:"fieldset-legend"},"عنوان",-1)),h(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.title=l),class:"input input-primary w-full",type:"text",placeholder:"عنوان "},null,512),[[E,t.value.title]])]),i(V,{title:"لینک مطلب","site-domain":`${A.value}/post/`,"ai-use-type":"link_generator","ai-input":t.value.title,modelValue:t.value.link,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.link=l)},null,8,["site-domain","ai-input","modelValue"]),i(V,{maxlength:140,title:"توضیح کوتاه","ai-use-type":"small_description","ai-input":c.value,modelValue:t.value.small_description,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.small_description=l)},null,8,["ai-input","modelValue"]),s("div",K,[e[11]||(e[11]=s("legend",{class:"fieldset-legend"},"متن مطلب",-1)),(d(),w(n(C),{key:t.value.id,default:t.value.description,modelValue:t.value.description,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.description=l)},null,8,["default","modelValue"]))])]),s("div",Q,[s("div",W,[s("input",{onChange:U,ref_key:"upload_main_image",ref:x,accept:".png, .jpg, .webp",type:"file",class:"hidden"},null,544),s("div",X,[t.value.image?(d(),r("img",{key:0,class:"max-w-72 w-full h-full mx-auto rounded-lg",src:n(p).server+t.value.image,alt:""},null,8,Y)):(d(),r("div",Z,[i(n(q),{class:"mx-auto size-32"})]))]),s("button",{class:"btn btn-primary mt-4",onClick:e[4]||(e[4]=l=>x.value.click())}," آپلود عکس مطلب ")]),s("fieldset",ee,[s("label",te,[h(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.publish=l),type:"checkbox",checked:t.value.publish,class:"checkbox checkbox-success"},null,8,se),[[N,t.value.publish]]),e[12]||(e[12]=g(" انتشار مطلب "))])]),s("div",le,[i(T,{"ai-use-type":"seo","ai-input":c.value,title:"SEO Check"},null,8,["ai-input"]),i(T,{"ai-use-type":"misspelling","ai-input":c.value,title:"Check Misspelling"},null,8,["ai-input"])]),s("div",{class:"text-center"},[s("button",{onClick:k,class:"btn btn-success"}," ذخیره مطلب ")])])])):f("",!0),n(u).hash=="#meta"?(d(),r("div",ae,[t.value.id?(d(),w(O,{key:0,modelValue:t.value,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value=l),"content-title-and-text":"مطالب سئو",onSave:e[7]||(e[7]=l=>k())},null,8,["modelValue"])):f("",!0)])):f("",!0)])}}};export{me as default};
