import{r as u,o as $,h as t,d as e,m as i,k,N as p,F as g,l as f,t as o,A as x,g as s}from"./index-0-VPgZRq.js";const B={class:"p-6 mx-auto bg-base-200"},L={class:"flex items-center justify-between mb-6"},N={class:"overflow-x-auto rounded-lg shadow"},V={class:"table w-full"},F={class:"avatar"},I={class:"w-12 h-12 rounded-full border"},j=["src"],D={class:"flex flex-wrap gap-1"},E={class:"flex gap-2"},G=["onClick"],H=["onClick"],P=["onClick"],S={key:0},q={key:0,class:"text-center py-6"},z={class:"modal-box max-w-lg"},J={class:"font-bold text-lg mb-4"},K={class:"flex flex-col gap-3"},O={class:"flex items-center gap-3"},Q=["src"],R={class:"font-medium"},T={class:"text-sm text-gray-500"},U={class:"text-sm leading-relaxed"},W={key:0,class:"flex flex-wrap gap-1"},X={key:1,class:"mt-3"},Y=["href"],Z={class:"mt-2 flex gap-3 text-sm"},ee=["href"],te=["href"],se={key:1,class:"alert alert-success mt-6"},le={key:2,class:"alert alert-error mt-6"},oe={__name:"AuthorsListView",setup(ae){const d=u([]),_=u(!1),v=u(""),c=u(""),b=u(null),l=u(null),y=()=>{_.value=!0,v.value="",c.value="",x.post("/admin/authors/list").then(r=>{d.value=r.list||[]}).catch(r=>{console.error(r),c.value="❌ خطا در دریافت لیست نویسندگان"}).finally(()=>{_.value=!1})},w=r=>{l.value=r,b.value.showModal()},C=()=>{b.value.close(),l.value=null},A=r=>{confirm("آیا از حذف این نویسنده مطمئن هستید؟")&&x.post("/admin/authors/delete",{id:r}).then(n=>{n.ok&&(v.value="✅ نویسنده با موفقیت حذف شد.",d.value=d.value.filter(a=>a.id!==r))}).catch(n=>{console.error(n),c.value="❌ خطا در حذف نویسنده"})};return $(()=>{y()}),(r,n)=>(s(),t("div",B,[e("div",L,[n[1]||(n[1]=e("h1",{class:"text-2xl font-bold"},"لیست نویسندگان",-1)),e("button",{class:"btn btn-outline btn-primary",onClick:n[0]||(n[0]=a=>k(p).push({name:"admin_setting_manage_author_new"}))}," ایجاد ")]),e("div",N,[e("table",V,[n[3]||(n[3]=e("thead",null,[e("tr",{class:"bg-base-300"},[e("th",null,"#"),e("th",null,"تصویر"),e("th",null,"نام"),e("th",null,"عنوان تخصصی"),e("th",null,"مهارت‌ها"),e("th",null,"تجربه"),e("th",null,"عملیات")])],-1)),e("tbody",null,[(s(!0),t(g,null,f(d.value,(a,m)=>(s(),t("tr",{key:a.id,class:"hover"},[e("td",null,o(m+1),1),e("td",null,[e("div",F,[e("div",I,[a.avatar?(s(),t("img",{key:0,src:a.avatar,alt:"avatar"},null,8,j)):i("",!0)])])]),e("td",null,o(a.name),1),e("td",null,o(a.title||"-"),1),e("td",null,[e("div",D,[(s(!0),t(g,null,f(a.skills,(h,M)=>(s(),t("span",{key:M,class:"badge badge-outline badge-sm"},o(h),1))),128))])]),e("td",null,o(a.experience_years)+" سال",1),e("td",null,[e("div",E,[e("button",{class:"btn btn-xs btn-outline btn-info",onClick:h=>k(p).push({name:"admin_setting_manage_author_edit",params:{id:a.id}})},"ویرایش",8,G),e("button",{class:"btn btn-xs btn-outline btn-info",onClick:h=>w(a)},"مشاهده",8,H),e("button",{class:"btn btn-xs btn-outline btn-error",onClick:h=>A(a.id)},"حذف",8,P)])])]))),128)),d.value.length===0&&!_.value?(s(),t("tr",S,n[2]||(n[2]=[e("td",{colspan:"7",class:"text-center py-6 text-gray-500"}," هیچ نویسنده‌ای یافت نشد 🙁 ",-1)]))):i("",!0)])])]),_.value?(s(),t("div",q,n[4]||(n[4]=[e("span",{class:"loading loading-spinner loading-lg"},null,-1)]))):i("",!0),e("dialog",{ref_key:"modal",ref:b,class:"modal"},[e("div",z,[e("h3",J,o(l.value?.name),1),e("div",K,[e("div",O,[l.value?.avatar?(s(),t("img",{key:0,src:l.value?.avatar,class:"w-16 h-16 rounded-full border"},null,8,Q)):i("",!0),e("div",null,[e("p",R,o(l.value?.title),1),e("p",T,o(l.value?.experience_years)+" سال تجربه",1)])]),e("p",U,o(l.value?.bio),1),l.value?.skills?.length?(s(),t("div",W,[(s(!0),t(g,null,f(l.value.skills,(a,m)=>(s(),t("span",{key:m,class:"badge badge-outline badge-sm"},o(a),1))),128))])):i("",!0),l.value?.website?(s(),t("div",X,[e("a",{href:l.value.website,target:"_blank",class:"link link-primary text-sm"}," 🌐 وب‌سایت شخصی ",8,Y)])):i("",!0),e("div",Z,[l.value?.social?.linkedin?(s(),t("a",{key:0,href:l.value.social.linkedin,target:"_blank",class:"link text-blue-600"},"LinkedIn",8,ee)):i("",!0),l.value?.social?.github?(s(),t("a",{key:1,href:l.value.social.github,target:"_blank",class:"link text-gray-700"},"GitHub",8,te)):i("",!0)])]),e("div",{class:"modal-action"},[e("button",{class:"btn",onClick:C},"بستن")])])],512),v.value?(s(),t("div",se,o(v.value),1)):i("",!0),c.value?(s(),t("div",le,o(c.value),1)):i("",!0)]))}};export{oe as default};
