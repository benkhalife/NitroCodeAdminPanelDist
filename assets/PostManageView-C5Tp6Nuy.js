const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TipTop-CK9Y3d3n.js","assets/index-CmSqWVxV.js","assets/index-B93Utos5.css","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/TipTop-CCLCb3RD.css"])))=>i.map(i=>d[i]);
import{u as U,r as v,x as B,B as E,h as u,b as d,m as p,w as M,k as o,d as l,e as h,v as N,c as b,E as z,A as m,z as D,D as I,_ as R,f as O,g as n,q as g}from"./index-CmSqWVxV.js";import{_ as j}from"./TitleBar-D9KFQ00T.js";import{u as q}from"./sidebar-OnuUI39J.js";import{_ as k,a as w,b as F}from"./MetaTags-mE3cn5YK.js";import{_ as L}from"./UploadFiles-DMj5Ymu7.js";import{r as G}from"./PhotoIcon-DdiYICkJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={role:"tablist",class:"tabs tabs-box bg-base-100/20 mr-auto border-base-100 border"},J={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},K={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},Q={class:"fieldset"},W={class:""},X={class:"rounded-lg bg-base-200 p-2 lg:p-4 flex flex-col gap-4 lg:min-w-sm"},Y={class:"text-center"},Z={class:"mt-4"},ee=["src"],te={key:1,class:"mx-auto"},se={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},le={class:"label"},ae=["checked"],oe={class:"flex flex-wrap gap-2 md:grid-cols-2"},ie={key:1,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},ne={key:2,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4 tab-active"},be={__name:"PostManageView",setup(ue){const y=z(()=>R(()=>import("./TipTop-CK9Y3d3n.js"),__vite__mapDeps([0,1,2,3,4]))),c=q(),V=U(),i=B(),T=O(),_=async()=>{const a=await m.post("admin/post/info",{id:i.params.id});a.ok&&(e.value=a.post,e.value&&e.value.publish==="0"?e.value.publish=!1:e.value&&e.value.publish==="1"&&(e.value.publish=!0))},x=v(null),e=v({contents:[],meta:{}}),r=async()=>{const a=await m.post("admin/post/save",{...e.value});a.ok&&(V.showToast("مطلب ذخیره شد!","success"),i.name=="admin_post_new"&&(await T.push({name:"admin_post_edit",params:{id:a.post.id}}),_()))},C=a=>{const t=a.target.files[0];m.uploadFile("admin/post/upload-image",t,{},s=>{console.log(s)},s=>{console.log(s),s.ok&&(console.log(s.dir),e.value.image=s.dir)},s=>{})};i.name=="admin_post_new"?c.setTitle("ایجاد مطلب جدید"):(c.setTitle("ویرایش مطلب"),_());const $=v("https://nitrocode.ir"),f=E(()=>`\`\`\` 
<h1>${e.value.title}</h1> <br> ${e.value.description} 
 \`\`\` 
---
  
`),P=a=>{e.value.audio=a.name,r()},S=a=>{e.value.video_poster=a.name,r()},A=a=>{e.value.video_target=a.name,r()};return(a,t)=>(n(),u("div",null,[d(j,{title:o(c).getTitle},{default:M(()=>[l("div",H,[l("a",{href:"#",role:"tab",class:g(["tab",{"tab-active":o(i).hash===""}])}," اطلاعات مطلب ",2),l("a",{href:"#meta",role:"tab",class:g(["tab",{"tab-active":o(i).hash==="#meta"}])}," متا تگ‌ها ",2),l("a",{href:"#files",role:"tab",class:g(["tab",{"tab-active":o(i).hash==="#files"}])}," فایل‌ها ",2)])]),_:1},8,["title"]),o(i).hash==""?(n(),u("div",J,[l("div",K,[l("fieldset",Q,[t[11]||(t[11]=l("legend",{class:"fieldset-legend"},"عنوان",-1)),h(l("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.value.title=s),class:"input input-primary w-full",type:"text",placeholder:"عنوان "},null,512),[[N,e.value.title]])]),d(k,{title:"لینک مطلب","site-domain":`${$.value}/post/`,"ai-use-type":"link_generator","ai-input":e.value.title,modelValue:e.value.link,"onUpdate:modelValue":t[1]||(t[1]=s=>e.value.link=s)},null,8,["site-domain","ai-input","modelValue"]),d(k,{maxlength:140,title:"توضیح کوتاه","ai-use-type":"small_description","ai-input":f.value,modelValue:e.value.small_description,"onUpdate:modelValue":t[2]||(t[2]=s=>e.value.small_description=s)},null,8,["ai-input","modelValue"]),l("div",W,[t[12]||(t[12]=l("legend",{class:"fieldset-legend"},"متن مطلب",-1)),(n(),b(o(y),{key:e.value.id,default:e.value.description,modelValue:e.value.description,"onUpdate:modelValue":t[3]||(t[3]=s=>e.value.description=s)},null,8,["default","modelValue"]))])]),l("div",X,[l("div",Y,[l("input",{onChange:C,ref_key:"upload_main_image",ref:x,accept:".png, .jpg, .webp",type:"file",class:"hidden"},null,544),l("div",Z,[e.value.image?(n(),u("img",{key:0,class:"max-w-72 w-full h-full mx-auto rounded-lg",src:o(m).server+e.value.image,alt:""},null,8,ee)):(n(),u("div",te,[d(o(G),{class:"mx-auto size-32"})]))]),l("button",{class:"btn btn-primary mt-4",onClick:t[4]||(t[4]=s=>x.value.click())}," آپلود عکس مطلب ")]),l("fieldset",se,[l("label",le,[h(l("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>e.value.publish=s),type:"checkbox",checked:e.value.publish,class:"checkbox checkbox-success"},null,8,ae),[[I,e.value.publish]]),t[13]||(t[13]=D(" انتشار مطلب "))])]),l("div",oe,[d(w,{"ai-use-type":"seo","ai-input":f.value,title:"SEO Check"},null,8,["ai-input"]),d(w,{"ai-use-type":"misspelling","ai-input":f.value,title:"Check Misspelling"},null,8,["ai-input"])]),l("div",{class:"text-center"},[l("button",{onClick:r,class:"btn btn-success"}," ذخیره مطلب ")])])])):p("",!0),o(i).hash=="#meta"?(n(),u("div",ie,[e.value.id?(n(),b(F,{key:0,modelValue:e.value,"onUpdate:modelValue":t[6]||(t[6]=s=>e.value=s),"content-title-and-text":"مطالب سئو",onSave:t[7]||(t[7]=s=>r())},null,8,["modelValue"])):p("",!0)])):p("",!0),o(i).hash=="#files"?(n(),u("div",ne,[e.value.id?(n(),b(L,{key:0,episode:e.value,"upload-link":"admin/post/upload-post-video","fetch-files-url":"admin/post/get-post-files","delete-file-url":"admin/post/delete-post-file",onSetAudio:t[8]||(t[8]=s=>P(s)),onSetVideo:t[9]||(t[9]=s=>A(s)),onSetVideoPoster:t[10]||(t[10]=s=>S(s))},null,8,["episode"])):p("",!0)])):p("",!0)]))}};export{be as default};
