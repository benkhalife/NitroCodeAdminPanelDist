import{u as B,r as $,x as S,o as E,B as M,h as r,b as u,m as p,w as c,k as n,d as s,e as v,v as f,q as a,c as V,z as y,D as N,A as m,f as R,j,g as d}from"./index-DNSUhpHF.js";import{_ as C,a as z,c as A}from"./MetaTags-pF780NV4.js";import{_ as L}from"./TitleBar-BfRJqsOR.js";import{u as P}from"./sidebar-CmPqzehf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"mr-auto flex gap-4 items-center"},I={role:"tablist",class:"tabs tabs-box"},q=["src"],H={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},F={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={class:"fieldset"},K={class:"border border-primary p-4 rounded-xl bg-base-100"},O={class:"flex gap-4 justify-start mt-4"},Q={key:0,class:"mt-6"},W={class:"fieldset"},X={class:"border border-primary p-4 rounded-xl bg-base-100"},Y={class:"flex gap-4 justify-start mt-4"},Z={class:"fieldset"},ee={class:"grid grid-cols-1 md:grid-cols-3"},te={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},se={class:"label"},le=["checked"],ie={class:"text-center"},ae={key:1,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},ve={__name:"ProductEpisodeManageView",setup(oe){const b=P(),T=B(),i=S(),U=R(),t=$({}),_=$({title:""}),h=async()=>{const o=await m.post("admin/product/info",{id:i.params.product_id});o.ok&&(_.value=o.product,i.name!="admin_product_episode_new"&&g())},g=async()=>{const o=await m.post("admin/product/episode-info",{episode_id:i.params.episode_id});o.ok&&(t.value=o.episode)},x=async()=>{const o=await m.post("admin/product/episode-save",{...t.value,product_id:i.params.product_id});o.ok&&(T.showToast("عملیات با موفقیت انجام شد!","success"),i.name=="admin_product_episode_new"&&(await U.push({name:"admin_product_episode_edit",params:{product_id:i.params.product_id,episode_id:o.episode_id}}),g()))};i.name=="admin_product_episode_new"?b.setTitle("ایجاد قسمت جدید"):b.setTitle("ویرایش قسمت"),E(()=>{h()});const k=M(()=>`\`\`\` 
<h1>${t.value.title}</h1> <br> ${t.value.description} 
 \`\`\` 
---
  
`);return(o,e)=>{const w=j("RouterLink");return d(),r("div",null,[u(L,{title:n(b).getTitle+" - ("+_.value.title+")"},{default:c(()=>[s("div",D,[s("div",I,[u(w,{to:{hash:""},role:"tab",class:a(["tab",{"tab-active tab-primary":n(i).hash==""}])},{default:c(()=>e[17]||(e[17]=[y(" اطلاعات کلی ")])),_:1,__:[17]},8,["class"]),u(w,{to:{hash:"#meta"},class:a([{"tab-active":n(i).hash=="#meta"},"tab"]),role:"tab"},{default:c(()=>e[18]||(e[18]=[y("متا تگ‌ها")])),_:1,__:[18]},8,["class"])]),s("img",{src:n(m).server+_.value.image,class:"size-10 rounded-xl",alt:""},null,8,q)])]),_:1},8,["title"]),n(i).hash==""?(d(),r("div",H,[s("div",F,[s("div",G,[s("fieldset",J,[e[19]||(e[19]=s("legend",{class:"fieldset-legend"},"عنوان قسمت دوره",-1)),v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.title=l),class:"input input-primary w-full",type:"text",placeholder:"عنوان محصول"},null,512),[[f,t.value.title]])]),u(C,{title:"لینک قسمت","site-domain":"/","ai-use-type":"link_generator","ai-input":t.value.title,modelValue:t.value.link,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.link=l)},null,8,["ai-input","modelValue"])]),s("div",{class:a({"opacity-70":t.value.display_status==="introduction"})},[u(C,{maxlength:140,title:"توضیح کوتاه","ai-use-type":"small_description","ai-input":k.value,modelValue:t.value.small_description,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.small_description=l)},null,8,["ai-input","modelValue"])],2),s("div",{class:a({"opacity-70":t.value.display_status==="introduction"})},[e[20]||(e[20]=s("legend",{class:"fieldset-legend"},"توضیحات",-1)),(d(),V(z,{key:t.value.id,value:t.value.description,onInput:e[3]||(e[3]=l=>t.value.description=l)},null,8,["value"]))],2),s("div",K,[e[22]||(e[22]=s("div",null," نوع ارائه این قسمت : ",-1)),s("div",O,[s("button",{class:a([`${t.value.display_status==="introduction"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[4]||(e[4]=l=>t.value.display_status="introduction")}," معرفی دوره ",2),s("button",{class:a([`${t.value.display_status==="free"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[5]||(e[5]=l=>t.value.display_status="free")},"رایگان",2),s("button",{class:a([`${t.value.display_status==="free_with_login"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[6]||(e[6]=l=>t.value.display_status="free_with_login")}," رایگان با لاگین ",2),s("button",{class:a([`${t.value.display_status==="vip_preview"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[7]||(e[7]=l=>t.value.display_status="vip_preview")}," خرید+پیش‌نمایش ",2),s("button",{class:a([`${t.value.display_status==="vip"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[8]||(e[8]=l=>t.value.display_status="vip")}," خرید ",2)]),t.value.display_status=="vip_preview"?(d(),r("div",Q,[s("fieldset",W,[e[21]||(e[21]=s("legend",{class:"fieldset-legend"},"مدت زمان پیش نمایش رایگان (به ثانیه)",-1)),v(s("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.free_demo_time=l),class:"input input-primary w-full",type:"number",placeholder:""},null,512),[[f,t.value.free_demo_time]])])])):p("",!0)]),s("div",X,[e[23]||(e[23]=s("div",null," نوع ویدیو : ",-1)),s("div",Y,[s("button",{class:a([`${t.value.video_type==="hls"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[10]||(e[10]=l=>t.value.video_type="hls")},"HLS",2),s("button",{class:a([`${t.value.video_type==="mp4"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[11]||(e[11]=l=>t.value.video_type="mp4")},"mp4",2)])]),s("div",null,[s("fieldset",Z,[e[24]||(e[24]=s("legend",{class:"fieldset-legend"},"جاییگاه (برای مرتب سازی) (به صورت عدد 0 تا 100)",-1)),v(s("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.sort_index=l),class:"input input-primary w-full",type:"text",placeholder:""},null,512),[[f,t.value.sort_index]])])]),s("div",ee,[s("fieldset",te,[s("label",se,[v(s("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=l=>t.value.publish=l),checked:t.value.publish,class:"checkbox checkbox-success"},null,8,le),[[N,t.value.publish]]),e[25]||(e[25]=y(" انتشار "))])])]),s("div",ie,[s("button",{onClick:e[14]||(e[14]=l=>x()),class:"btn btn-success"}," ذخیره قسمت ")])])])):p("",!0),n(i).hash=="#meta"?(d(),r("div",ae,[t.value.id?(d(),V(A,{key:0,modelValue:t.value,"onUpdate:modelValue":e[15]||(e[15]=l=>t.value=l),"ai-input":k.value,onSave:e[16]||(e[16]=l=>x())},null,8,["modelValue","ai-input"])):p("",!0)])):p("",!0)])}}};export{ve as default};
