import{u as $,r as f,x as C,o as V,h as m,b as T,m as _,w as U,k as c,d as t,e as d,v as a,q as o,c as j,z as M,C as P,A as u,P as B,f as E,g as r}from"./index-DnRAaELF.js";import{_ as N}from"./TextEditor-DUDE5cZ2.js";import{_ as S}from"./TitleBar-C5gKkTWL.js";import{u as z}from"./sidebar-BAqvNu6G.js";const A={class:"mr-auto"},L=["src"],I={key:0,class:"flex gap-4 lg:items-start flex-col lg:flex-row w-full mt-4 py-4"},R={class:"w-full flex flex-col gap-4 rounded-lg bg-base-200 p-2 lg:p-4"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},D={class:"fieldset"},F={class:"fieldset flex-1"},G={class:"join"},H={class:"fieldset"},J={class:"border border-primary p-4 rounded-xl bg-base-100"},K={class:"flex gap-4 justify-start mt-4"},O={key:0,class:"mt-6"},Q={class:"fieldset"},W={class:"border border-primary p-4 rounded-xl bg-base-100"},X={class:"flex gap-4 justify-start mt-4"},Y={class:"fieldset"},Z={class:"grid grid-cols-1 md:grid-cols-3"},h={class:"fieldset bg-base-100 border-base-300 rounded-box w-64 border p-4 lg:mt-auto w-full"},ee={class:"label"},te=["checked"],se={class:"text-center"},ae={__name:"ProductEpisodeManageView",setup(le){const p=z(),y=$(),n=C(),g=E(),s=f({}),v=f({title:""}),k=async()=>{const i=await u.post("admin/product/info",{id:n.params.product_id});i.ok&&(v.value=i.product,n.name!="admin_product_episode_new"&&b())},b=async()=>{const i=await u.post("admin/product/episode-info",{episode_id:n.params.episode_id});i.ok&&(s.value=i.episode)},x=async()=>{const i=await u.post("admin/product/episode-save",{...s.value,product_id:n.params.product_id});i.ok&&(y.showToast("عملیات با موفقیت انجام شد!","success"),n.name=="admin_product_episode_new"&&(await g.push({name:"admin_product_episode_edit",params:{product_id:n.params.product_id,episode_id:i.episode_id}}),b()))};n.name=="admin_product_episode_new"?p.setTitle("ایجاد قسمت جدید"):p.setTitle("ویرایش قسمت");const w=()=>{s.value.link=B(s.value.title)};return V(()=>{k()}),(i,e)=>(r(),m("div",null,[T(S,{title:c(p).getTitle+" - ("+v.value.title+")"},{default:U(()=>[t("div",A,[t("img",{src:c(u).server+v.value.image,class:"size-10 rounded-xl",alt:""},null,8,L)])]),_:1},8,["title"]),c(n).hash==""?(r(),m("div",I,[t("div",R,[t("div",q,[t("fieldset",D,[e[16]||(e[16]=t("legend",{class:"fieldset-legend"},"عنوان قسمت دوره",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.title=l),class:"input input-primary w-full",type:"text",placeholder:"عنوان محصول"},null,512),[[a,s.value.title]])]),t("fieldset",F,[e[17]||(e[17]=t("legend",{class:"fieldset-legend"},"لینک قسمت",-1)),t("div",G,[t("button",{onClick:e[1]||(e[1]=l=>w()),class:"btn btn-secondary opacity-50 join-item"},"G/A"),d(t("input",{class:"w-full join-item input",type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>s.value.link=l),placeholder:"لینک محصول"},null,512),[[a,s.value.link]])])])]),t("div",{class:o({"opacity-70":s.value.display_status==="introduction"})},[t("fieldset",H,[e[18]||(e[18]=t("legend",{class:"fieldset-legend"},"توضیحات کوتاه",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.small_description=l),class:"input input-primary w-full",type:"text",placeholder:""},null,512),[[a,s.value.small_description]])])],2),t("div",{class:o({"opacity-70":s.value.display_status==="introduction"})},[e[19]||(e[19]=t("legend",{class:"fieldset-legend"},"توضیحات",-1)),(r(),j(N,{key:s.value.id,value:s.value.description,onInput:e[4]||(e[4]=l=>s.value.description=l)},null,8,["value"]))],2),t("div",J,[e[21]||(e[21]=t("div",null," نوع ارائه این قسمت : ",-1)),t("div",K,[t("button",{class:o([`${s.value.display_status==="introduction"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[5]||(e[5]=l=>s.value.display_status="introduction")}," معرفی دوره ",2),t("button",{class:o([`${s.value.display_status==="free"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[6]||(e[6]=l=>s.value.display_status="free")},"رایگان",2),t("button",{class:o([`${s.value.display_status==="free_with_login"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[7]||(e[7]=l=>s.value.display_status="free_with_login")}," رایگان با لاگین ",2),t("button",{class:o([`${s.value.display_status==="vip_preview"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[8]||(e[8]=l=>s.value.display_status="vip_preview")}," خرید+پیش‌نمایش ",2),t("button",{class:o([`${s.value.display_status==="vip"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[9]||(e[9]=l=>s.value.display_status="vip")}," خرید ",2)]),s.value.display_status=="vip_preview"?(r(),m("div",O,[t("fieldset",Q,[e[20]||(e[20]=t("legend",{class:"fieldset-legend"},"مدت زمان پیش نمایش رایگان (به ثانیه)",-1)),d(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>s.value.free_demo_time=l),class:"input input-primary w-full",type:"number",placeholder:""},null,512),[[a,s.value.free_demo_time]])])])):_("",!0)]),t("div",W,[e[22]||(e[22]=t("div",null," نوع ویدیو : ",-1)),t("div",X,[t("button",{class:o([`${s.value.video_type==="hls"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[11]||(e[11]=l=>s.value.video_type="hls")},"HLS",2),t("button",{class:o([`${s.value.video_type==="mp4"?"":"btn-outline"}`,"btn btn-primary"]),onClick:e[12]||(e[12]=l=>s.value.video_type="mp4")},"mp4",2)])]),t("div",null,[t("fieldset",Y,[e[23]||(e[23]=t("legend",{class:"fieldset-legend"},"جاییگاه (برای مرتب سازی) (به صورت عدد 0 تا 100)",-1)),d(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>s.value.sort_index=l),class:"input input-primary w-full",type:"text",placeholder:""},null,512),[[a,s.value.sort_index]])])]),t("div",Z,[t("fieldset",h,[t("label",ee,[d(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=l=>s.value.publish=l),checked:s.value.publish,class:"checkbox checkbox-success"},null,8,te),[[P,s.value.publish]]),e[24]||(e[24]=M(" انتشار "))])])]),t("div",se,[t("button",{onClick:e[15]||(e[15]=l=>x()),class:"btn btn-success"}," ذخیره قسمت ")])])])):_("",!0)]))}};export{ae as default};
