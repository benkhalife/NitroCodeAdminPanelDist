import{r as d,x as U,o as S,h as i,d as l,m as f,e as u,v as n,C as A,F as M,l as h,t as m,E as L,A as x,f as B,g as o,n as C}from"./index-BNclIr6N.js";const I={class:"p-6 mx-auto bg-base-200 w-full"},N={key:0,class:"mt-2"},R=["src"],T=["value"],q={class:"pt-4"},D=["disabled"],E={key:0},F={key:1,class:"loading loading-spinner"},J={key:0,class:"alert alert-success mt-6"},P={key:1,class:"alert alert-error mt-6"},H={__name:"AuthorCreateView",setup(j){const k=B(),y=U(),t=d({name:"",slug:"",title:"",avatar:"",bio:"",skills:[],experience_years:0,website:"",linkedin:"",github:""}),r=d(""),p=d(!1),v=d(""),b=d(""),g=d([]),V=()=>{x.post("admin/user/admin-list",{}).then(s=>{s.ok&&(g.value=s.list)})},w=()=>{x.post("admin/authors/info",{id:t.value.id}).then(s=>{s.ok&&(t.value=s.info,r.value=JSON.parse(t.value.skills).join(", "))})};y.name=="admin_setting_manage_author_edit"&&(t.value.id=y.params.id,w());const c=()=>{p.value=!0,v.value="",b.value="",t.value.skills=r.value.split(",").map(s=>s.trim()).filter(s=>s.length>0),x.post("/admin/authors/save-author",t.value).then(async s=>{s.ok&&(v.value="✅ نویسنده با موفقیت ذخیره شد.",await k.replace({name:"admin_setting_manage_author_edit",params:{id:s.author_id}}),C(()=>{w()}))}).catch(s=>{b.value="❌ مشکلی در ذخیره اطلاعات پیش آمد.",console.error(s)}).finally(()=>{p.value=!1})};return S(()=>{V()}),(s,e)=>(o(),i("div",I,[e[22]||(e[22]=l("h1",{class:"text-2xl font-bold mb-6"},"ایجاد/ویرایش نویسنده جدید",-1)),l("form",{onSubmit:L(c,["prevent"]),class:"space-y-5"},[l("div",null,[e[11]||(e[11]=l("label",{class:"label"},[l("span",{class:"label-text"},"نام کامل")],-1)),u(l("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.name=a),type:"text",placeholder:"",class:"input input-bordered w-full",required:""},null,512),[[n,t.value.name]])]),l("div",null,[e[12]||(e[12]=l("label",{class:"label"},[l("span",{class:"label-text"},"نامک (Slug)")],-1)),u(l("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.slug=a),type:"text",placeholder:"مثلاً khalife",class:"input input-bordered w-full",required:""},null,512),[[n,t.value.slug]])]),l("div",null,[e[13]||(e[13]=l("label",{class:"label"},[l("span",{class:"label-text"},"عنوان تخصصی")],-1)),u(l("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.title=a),type:"text",placeholder:"برنامه‌نویس ارشد فرانت‌اند",class:"input input-bordered w-full"},null,512),[[n,t.value.title]])]),l("div",null,[e[14]||(e[14]=l("label",{class:"label"},[l("span",{class:"label-text"},"تصویر پروفایل (URL)")],-1)),u(l("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.avatar=a),type:"text",placeholder:"https://...",class:"input input-bordered w-full"},null,512),[[n,t.value.avatar]]),t.value.avatar?(o(),i("div",N,[l("img",{src:t.value.avatar,alt:"Avatar Preview",class:"w-24 h-24 rounded-full border"},null,8,R)])):f("",!0)]),l("div",null,[e[15]||(e[15]=l("label",{class:"label"},[l("span",{class:"label-text"},"بیوگرافی کوتاه")],-1)),u(l("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.bio=a),rows:"3",class:"textarea textarea-bordered w-full",placeholder:"چند خط معرفی کوتاه..."},null,512),[[n,t.value.bio]])]),l("div",null,[e[16]||(e[16]=l("label",{class:"label"},[l("span",{class:"label-text"},"مهارت‌ها (با ویرگول جدا کنید)")],-1)),u(l("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>r.value=a),type:"text",placeholder:"Vue, Tailwind, JavaScript",class:"input input-bordered w-full"},null,512),[[n,r.value]])]),l("div",null,[e[17]||(e[17]=l("label",{class:"label"},[l("span",{class:"label-text"},"تجربه کاری (سال)")],-1)),u(l("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.experience_years=a),type:"number",min:"0",class:"input input-bordered w-full"},null,512),[[n,t.value.experience_years,void 0,{number:!0}]])]),l("div",null,[e[18]||(e[18]=l("label",{class:"label"},[l("span",{class:"label-text"},"LinkedIn (اختیاری)")],-1)),u(l("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.linkedin=a),type:"text",placeholder:"https://linkedin.com/...",class:"input input-bordered w-full"},null,512),[[n,t.value.linkedin]])]),l("div",null,[e[19]||(e[19]=l("label",{class:"label"},[l("span",{class:"label-text"},"GitHub (اختیاری)")],-1)),u(l("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.github=a),type:"text",placeholder:"https://github.com/...",class:"input input-bordered w-full"},null,512),[[n,t.value.github]])]),l("div",null,[e[20]||(e[20]=l("label",{class:"label"},[l("span",{class:"label-text"},"وب‌سایت شخصی (اختیاری)")],-1)),u(l("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.website=a),type:"text",placeholder:"https://...",class:"input input-bordered w-full"},null,512),[[n,t.value.website]])]),l("div",null,[u(l("select",{"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.user_id=a),class:"select"},[e[21]||(e[21]=l("option",{disabled:""},"اتصال به ادمین",-1)),(o(!0),i(M,null,h(g.value,a=>(o(),i("option",{key:a.id,value:a.id},m(a.first_name)+" "+m(a.last_name),9,T))),128))],512),[[A,t.value.user_id]])]),l("div",q,[l("button",{type:"submit",class:"btn btn-primary w-full",disabled:p.value},[p.value?(o(),i("span",F)):(o(),i("span",E,"ذخیره نویسنده"))],8,D)])],32),v.value?(o(),i("div",J,m(v.value),1)):f("",!0),b.value?(o(),i("div",P,m(b.value),1)):f("",!0)]))}};export{H as default};
