import{u as b}from"./sidebar-CifeiDVe.js";import{_ as w}from"./TitleBar-CkT74Jdm.js";import{_ as h}from"./AddButton-DnwVRdK4.js";import{_ as k}from"./ComInput-CHvPmc12.js";import{f as $,c as p,o as u,d as t,u as m,A as _,t as v,b as a,w as x,S as y,e as g,F as B,g as C,k as P,a as V}from"./index-pAN-zCiv.js";import{r as L}from"./TrashIcon-BoOXbKVO.js";import{r as S}from"./PencilIcon-B9-dbdZg.js";import"./PlusIcon-haIce8lZ.js";const N={class:"flex items-center gap-4 p-2 rounded-lg shadow-sm shadow-primary/20 bg-base-200"},R=["src"],T={class:"flex-1"},z={class:"text-content-primary/20 text-sm"},A={class:"text-lg font-bold mt-1"},D={class:"flex gap-2 px-2"},E={__name:"PostItem",props:{post:{default:""}},emits:["deleted"],setup(l,{emit:f}){const o=l,d=f,r=async c=>{(await y.fire({title:"مطلب حذف شود؟",icon:"error",confirmButtonText:"بله حذف شود",cancelButtonText:"لغو",showCancelButton:!0})).isConfirmed&&(await _.post("admin/post/remove",{id:c})).ok&&d("deleted",o.post)};return(c,e)=>{const n=$("RouterLink");return u(),p("div",N,[t("div",null,[t("img",{class:"w-16 h-16 rounded-lg",src:m(_).server+o.post.image,alt:""},null,8,R)]),t("div",T,[t("div",z," شناسه : "+v(o.post.id),1),t("div",A,v(o.post.title),1)]),t("div",D,[t("button",{onClick:e[0]||(e[0]=s=>r(l.post.id)),class:"cursor-pointer block hover:bg-red-500/20 text-error duration-200 p-2 rounded-lg border border-error"},[a(m(L),{class:"size-6"})]),a(n,{to:{name:"admin_post_edit",params:{id:l.post.id}},class:"cursor-pointer block hover:bg-white/20 duration-200 p-2 rounded-lg border"},{default:x(()=>[a(m(S),{class:"size-6"})]),_:1},8,["to"])])])}}},F={class:"mt-8 flex flex-col gap-4"},Q={__name:"PostListView",setup(l){b().setTitle("لیست مطالب");const o=P(),d=g([]),r=g(""),c=()=>{o.push({name:"admin_post_new"})},e=async()=>{console.log(r.value);const n=await _.post("admin/post/list",{search:r.value});n.ok&&(d.value=n.list)};return e(),(n,s)=>(u(),p("div",null,[a(w,{title:"لیست مطالب"},{default:x(()=>[a(k,{onEnter:s[0]||(s[0]=i=>e()),placeholder:"جستجو ...",class:"flex-1","input-class":"input-primary",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"]),a(h,{onClick:c,title:"افزودن مطلب جدید"})]),_:1}),t("div",F,[(u(!0),p(B,null,C(d.value.data,(i,I)=>(u(),V(E,{onDeleted:s[2]||(s[2]=U=>e()),key:i.id,post:i},null,8,["post"]))),128))])]))}};export{Q as default};
